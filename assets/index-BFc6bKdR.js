const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Controls-BKF99LzW.js","./Icon-DLWababj.js","./DrawerController-B5c1RmR_.js","./DrawerController-CDtfjO5V.css"])))=>i.map(i=>d[i]);
var ps=Object.defineProperty;var jr=e=>{throw TypeError(e)};var ms=(e,t,n)=>t in e?ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Hr=(e,t,n)=>ms(e,typeof t!="symbol"?t+"":t,n),ur=(e,t,n)=>t.has(e)||jr("Cannot "+n);var pn=(e,t,n)=>(ur(e,t,"read from private field"),n?n.call(e):t.get(e)),ao=(e,t,n)=>t.has(e)?jr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),dr=(e,t,n,r)=>(ur(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Kr=(e,t,n)=>(ur(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Ur=!1;var No=Array.isArray,_s=Array.prototype.indexOf,Ar=Array.from,Ci=Object.defineProperty,bn=Object.getOwnPropertyDescriptor,Ei=Object.getOwnPropertyDescriptors,ys=Object.prototype,bs=Array.prototype,Mr=Object.getPrototypeOf;function co(e){return typeof e=="function"}const xn=()=>{};function xs(e){return e()}function bo(e){for(var t=0;t<e.length;t++)e[t]()}const Ve=2,Ni=4,Zo=8,Pr=16,Sn=32,Ao=64,Wo=128,Ke=256,Go=512,Se=1024,Cn=2048,jn=4096,wn=8192,Jo=16384,ws=32768,Qo=65536,Ai=1<<17,Ss=1<<19,Mi=1<<20,dn=Symbol("$state"),Pi=Symbol("legacy props"),Cs=Symbol("");function Di(e){return e===this.v}function Dr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ir(e){return!Dr(e,this.v)}function Es(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ns(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function As(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ms(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ii(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Ps(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ds(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Is(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ls(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function ks(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let no=!1,Ts=!1;function Rs(){no=!0}const Lr=1,kr=2,Li=4,Os=8,zs=16,Bs=1,Ws=2,Gs=4,Ys=8,Xs=16,ki=1,Fs=2,ke=Symbol();function Ti(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function oo(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Dt=null;function Vr(e){Dt=e}function Lt(e){return Ri().get(e)}function jt(e,t){return Ri().set(e,t),t}function oe(e,t=!1,n){Dt={p:Dt,c:null,e:null,m:!1,s:e,x:null,l:null},no&&!t&&(Dt.l={s:null,u:null,r1:[],r2:He(!1)})}function re(e){const t=Dt;if(t!==null){e!==void 0&&(t.x=e);const l=t.e;if(l!==null){var n=ee,r=Zt;t.e=null;try{for(var i=0;i<l.length;i++){var s=l[i];Tn(s.effect),kn(s.reaction),qn(s.fn)}}finally{Tn(n),kn(r)}}Dt=t.p,t.m=!0}return e||{}}function Mo(){return!no||Dt!==null&&Dt.l===null}function Ri(e){return Dt===null&&oo(),Dt.c??(Dt.c=new Map(qs(Dt)||void 0))}function qs(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function He(e,t){var n={f:0,v:e,reactions:null,equals:Di,rv:0,wv:0};return n}function tr(e,t=!1){var r;const n=He(e);return t||(n.equals=Ir),no&&Dt!==null&&Dt.l!==null&&((r=Dt.l).s??(r.s=[])).push(n),n}function b(e,t=!1){return js(tr(e,t))}function js(e){return Zt!==null&&!tn&&(Zt.f&Ve)!==0&&(fn===null?nl([e]):fn.push(e)),e}function Hn(e,t){return _(e,ce(()=>o(e))),t}function _(e,t){return Zt!==null&&!tn&&Mo()&&(Zt.f&(Ve|Pr))!==0&&(fn===null||!fn.includes(e))&&ks(),xo(e,t)}function xo(e,t){return e.equals(t)||(e.v,e.v=t,e.wv=$i(),Oi(e,Cn),Mo()&&ee!==null&&(ee.f&Se)!==0&&(ee.f&(Sn|Ao))===0&&(mn===null?ol([e]):mn.push(e))),t}function Oi(e,t){var n=e.reactions;if(n!==null)for(var r=Mo(),i=n.length,s=0;s<i;s++){var l=n[s],c=l.f;(c&Cn)===0&&(!r&&l===ee||(en(l,t),(c&(Se|Ke))!==0&&((c&Ve)!==0?Oi(l,jn):ir(l))))}}let Hs=!1;function Vn(e,t=null,n){if(typeof e!="object"||e===null||dn in e)return e;const r=Mr(e);if(r!==ys&&r!==bs)return e;var i=new Map,s=No(e),l=He(0);s&&i.set("length",He(e.length));var c;return new Proxy(e,{defineProperty(a,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Ds();var h=i.get(u);return h===void 0?(h=He(d.value),i.set(u,h)):_(h,Vn(d.value,c)),!0},deleteProperty(a,u){var d=i.get(u);if(d===void 0)u in a&&i.set(u,He(ke));else{if(s&&typeof u=="string"){var h=i.get("length"),f=Number(u);Number.isInteger(f)&&f<h.v&&_(h,f)}_(d,ke),$r(l)}return!0},get(a,u,d){var v;if(u===dn)return e;var h=i.get(u),f=u in a;if(h===void 0&&(!f||(v=bn(a,u))!=null&&v.writable)&&(h=He(Vn(f?a[u]:ke,c)),i.set(u,h)),h!==void 0){var m=o(h);return m===ke?void 0:m}return Reflect.get(a,u,d)},getOwnPropertyDescriptor(a,u){var d=Reflect.getOwnPropertyDescriptor(a,u);if(d&&"value"in d){var h=i.get(u);h&&(d.value=o(h))}else if(d===void 0){var f=i.get(u),m=f==null?void 0:f.v;if(f!==void 0&&m!==ke)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return d},has(a,u){var m;if(u===dn)return!0;var d=i.get(u),h=d!==void 0&&d.v!==ke||Reflect.has(a,u);if(d!==void 0||ee!==null&&(!h||(m=bn(a,u))!=null&&m.writable)){d===void 0&&(d=He(h?Vn(a[u],c):ke),i.set(u,d));var f=o(d);if(f===ke)return!1}return h},set(a,u,d,h){var P;var f=i.get(u),m=u in a;if(s&&u==="length")for(var v=d;v<f.v;v+=1){var w=i.get(v+"");w!==void 0?_(w,ke):v in a&&(w=He(ke),i.set(v+"",w))}f===void 0?(!m||(P=bn(a,u))!=null&&P.writable)&&(f=He(void 0),_(f,Vn(d,c)),i.set(u,f)):(m=f.v!==ke,_(f,Vn(d,c)));var y=Reflect.getOwnPropertyDescriptor(a,u);if(y!=null&&y.set&&y.set.call(h,d),!m){if(s&&typeof u=="string"){var p=i.get("length"),D=Number(u);Number.isInteger(D)&&D>=p.v&&_(p,D+1)}$r(l)}return!0},ownKeys(a){o(l);var u=Reflect.ownKeys(a).filter(f=>{var m=i.get(f);return m===void 0||m.v!==ke});for(var[d,h]of i)h.v!==ke&&!(d in a)&&u.push(d);return u},setPrototypeOf(){Is()}})}function $r(e,t=1){_(e,e.v+t)}function Zr(e){return e!==null&&typeof e=="object"&&dn in e?e[dn]:e}function nu(e,t){return Object.is(Zr(e),Zr(t))}var $n,zi,Bi,Wi;function Ks(){if($n===void 0){$n=window,zi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype;Bi=bn(t,"firstChild").get,Wi=bn(t,"nextSibling").get,e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Tr(e=""){return document.createTextNode(e)}function _n(e){return Bi.call(e)}function er(e){return Wi.call(e)}function Mt(e,t){return _n(e)}function ct(e,t){{var n=_n(e);return n instanceof Comment&&n.data===""?er(n):n}}function tt(e,t=1,n=!1){let r=e;for(;t--;)r=er(r);return r}function Us(e){e.textContent=""}function Qe(e){var t=Ve|Cn,n=Zt!==null&&(Zt.f&Ve)!==0?Zt:null;return ee===null||n!==null&&(n.f&Ke)!==0?t|=Ke:ee.f|=Mi,{ctx:Dt,deps:null,effects:null,equals:Di,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??ee}}function Te(e){const t=Qe(e);return t.equals=Ir,t}function Gi(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ln(t[n])}}function Vs(e){for(var t=e.parent;t!==null;){if((t.f&Ve)===0)return t;t=t.parent}return null}function $s(e){var t,n=ee;Tn(Vs(e));try{Gi(e),t=Ji(e)}finally{Tn(n)}return t}function Yi(e){var t=$s(e),n=(In||(e.f&Ke)!==0)&&e.deps!==null?jn:Se;en(e,n),e.equals(t)||(e.v=t,e.wv=$i())}function Xi(e){ee===null&&Zt===null&&As(),Zt!==null&&(Zt.f&Ke)!==0&&ee===null&&Ns(),Br&&Es()}function Zs(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ro(e,t,n,r=!0){var i=(e&Ao)!==0,s=ee,l={ctx:Dt,deps:null,nodes_start:null,nodes_end:null,f:e|Cn,first:null,fn:t,last:null,next:null,parent:i?null:s,prev:null,teardown:null,transitions:null,wv:0};if(n)try{rr(l),l.f|=ws}catch(u){throw Ln(l),u}else t!==null&&ir(l);var c=n&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&(Mi|Wo))===0;if(!c&&!i&&r&&(s!==null&&Zs(l,s),Zt!==null&&(Zt.f&Ve)!==0)){var a=Zt;(a.effects??(a.effects=[])).push(l)}return l}function Rr(e){const t=ro(Zo,null,!1);return en(t,Se),t.teardown=e,t}function Yo(e){Xi();var t=ee!==null&&(ee.f&Sn)!==0&&Dt!==null&&!Dt.m;if(t){var n=Dt;(n.e??(n.e=[])).push({fn:e,effect:ee,reaction:Zt})}else{var r=qn(e);return r}}function Js(e){return Xi(),io(e)}function Qs(e){const t=ro(Ao,e,!0);return(n={})=>new Promise(r=>{n.outro?wo(t,()=>{Ln(t),r(void 0)}):(Ln(t),r(void 0))})}function qn(e){return ro(Ni,e,!1)}function x(e,t){var n=Dt,r={effect:null,ran:!1};n.l.r1.push(r),r.effect=io(()=>{e(),!r.ran&&(r.ran=!0,_(n.l.r2,!0),ce(t))})}function Ae(){var e=Dt;io(()=>{if(o(e.l.r2)){for(var t of e.l.r1){var n=t.effect;(n.f&Se)!==0&&en(n,jn),so(n)&&rr(n),t.ran=!1}e.l.r2.v=!1}})}function io(e){return ro(Zo,e,!0)}function Ht(e,t=[],n=Qe){const r=t.map(n);return nr(()=>e(...r.map(o)))}function nr(e,t=0){return ro(Zo|Pr|t,e,!0)}function Qn(e,t=!0){return ro(Zo|Sn,e,!0,t)}function Fi(e){var t=e.teardown;if(t!==null){const n=Br,r=Zt;Qr(!0),kn(null);try{t.call(null)}finally{Qr(n),kn(r)}}}function qi(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;Ln(n,t),n=r}}function tl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Sn)===0&&Ln(t),t=n}}function Ln(e,t=!0){var n=!1;if((t||(e.f&Ss)!==0)&&e.nodes_start!==null){for(var r=e.nodes_start,i=e.nodes_end;r!==null;){var s=r===i?null:er(r);r.remove(),r=s}n=!0}qi(e,t&&!n),Ho(e,0),en(e,Jo);var l=e.transitions;if(l!==null)for(const a of l)a.stop();Fi(e);var c=e.parent;c!==null&&c.first!==null&&ji(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function ji(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function wo(e,t){var n=[];Or(e,n,!0),Hi(n,()=>{Ln(e),t&&t()})}function Hi(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Or(e,t,n){if((e.f&wn)===0){if(e.f^=wn,e.transitions!==null)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var r=e.first;r!==null;){var i=r.next,s=(r.f&Qo)!==0||(r.f&Sn)!==0;Or(r,t,s?n:!1),r=i}}}function Xo(e){Ki(e,!0)}function Ki(e,t){if((e.f&wn)!==0){e.f^=wn,(e.f&Se)===0&&(e.f^=Se),so(e)&&(en(e,Cn),ir(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Qo)!==0||(n.f&Sn)!==0;Ki(n,i?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let So=[],br=[];function Ui(){var e=So;So=[],bo(e)}function el(){var e=br;br=[],bo(e)}function zr(e){So.length===0&&queueMicrotask(Ui),So.push(e)}function Jr(){So.length>0&&Ui(),br.length>0&&el()}let Oo=!1,Fo=!1,qo=null,zo=!1,Br=!1;function Qr(e){Br=e}let po=[];let Zt=null,tn=!1;function kn(e){Zt=e}let ee=null;function Tn(e){ee=e}let fn=null;function nl(e){fn=e}let Ne=null,Ge=0,mn=null;function ol(e){mn=e}let Vi=1,jo=0,In=!1,Pn=null;function $i(){return++Vi}function so(e){var h;var t=e.f;if((t&Cn)!==0)return!0;if((t&jn)!==0){var n=e.deps,r=(t&Ke)!==0;if(n!==null){var i,s,l=(t&Go)!==0,c=r&&ee!==null&&!In,a=n.length;if(l||c){var u=e,d=u.parent;for(i=0;i<a;i++)s=n[i],(l||!((h=s==null?void 0:s.reactions)!=null&&h.includes(u)))&&(s.reactions??(s.reactions=[])).push(u);l&&(u.f^=Go),c&&d!==null&&(d.f&Ke)===0&&(u.f^=Ke)}for(i=0;i<a;i++)if(s=n[i],so(s)&&Yi(s),s.wv>e.wv)return!0}(!r||ee!==null&&!In)&&en(e,Se)}return!1}function rl(e,t){for(var n=t;n!==null;){if((n.f&Wo)!==0)try{n.fn(e);return}catch{n.f^=Wo}n=n.parent}throw Oo=!1,e}function il(e){return(e.f&Jo)===0&&(e.parent===null||(e.parent.f&Wo)===0)}function or(e,t,n,r){if(Oo){if(n===null&&(Oo=!1),il(t))throw e;return}n!==null&&(Oo=!0);{rl(e,t);return}}function Zi(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];(s.f&Ve)!==0?Zi(s,t,!1):t===s&&(n?en(s,Cn):(s.f&Se)!==0&&en(s,jn),ir(s))}}function Ji(e){var m;var t=Ne,n=Ge,r=mn,i=Zt,s=In,l=fn,c=Dt,a=tn,u=e.f;Ne=null,Ge=0,mn=null,In=(u&Ke)!==0&&(tn||!zo||Zt===null),Zt=(u&(Sn|Ao))===0?e:null,fn=null,Vr(e.ctx),tn=!1,jo++;try{var d=(0,e.fn)(),h=e.deps;if(Ne!==null){var f;if(Ho(e,Ge),h!==null&&Ge>0)for(h.length=Ge+Ne.length,f=0;f<Ne.length;f++)h[Ge+f]=Ne[f];else e.deps=h=Ne;if(!In)for(f=Ge;f<h.length;f++)((m=h[f]).reactions??(m.reactions=[])).push(e)}else h!==null&&Ge<h.length&&(Ho(e,Ge),h.length=Ge);if(Mo()&&mn!==null&&!tn&&h!==null&&(e.f&(Ve|jn|Cn))===0)for(f=0;f<mn.length;f++)Zi(mn[f],e);return i!==null&&jo++,d}finally{Ne=t,Ge=n,mn=r,Zt=i,In=s,fn=l,Vr(c),tn=a}}function sl(e,t){let n=t.reactions;if(n!==null){var r=_s.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&Ve)!==0&&(Ne===null||!Ne.includes(t))&&(en(t,jn),(t.f&(Ke|Go))===0&&(t.f^=Go),Gi(t),Ho(t,0))}function Ho(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)sl(e,n[r])}function rr(e){var t=e.f;if((t&Jo)===0){en(e,Se);var n=ee,r=Dt,i=zo;ee=e,zo=!0;try{(t&Pr)!==0?tl(e):qi(e),Fi(e);var s=Ji(e);e.teardown=typeof s=="function"?s:null,e.wv=Vi;var l=e.deps,c;Ur&&Ts&&e.f&Cn}catch(a){or(a,e,n,r||e.ctx)}finally{zo=i,ee=n}}}function ll(){try{Ms()}catch(e){if(qo!==null)or(e,qo,null);else throw e}}function Qi(){try{for(var e=0;po.length>0;){e++>1e3&&ll();var t=po,n=t.length;po=[];for(var r=0;r<n;r++){var i=t[r];(i.f&Se)===0&&(i.f^=Se);var s=cl(i);al(s)}}}finally{Fo=!1,qo=null}}function al(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&(Jo|wn))===0)try{so(r)&&(rr(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?ji(r):r.fn=null))}catch(i){or(i,r,null,r.ctx)}}}function ir(e){Fo||(Fo=!0,queueMicrotask(Qi));for(var t=qo=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(Ao|Sn))!==0){if((n&Se)===0)return;t.f^=Se}}po.push(t)}function cl(e){var t=[],n=e.first;t:for(;n!==null;){var r=n.f,i=(r&Sn)!==0,s=i&&(r&Se)!==0,l=n.next;if(!s&&(r&wn)===0){if((r&Ni)!==0)t.push(n);else if(i)n.f^=Se;else{var c=Zt;try{Zt=n,so(n)&&rr(n)}catch(d){or(d,n,null,n.ctx)}finally{Zt=c}}var a=n.first;if(a!==null){n=a;continue}}if(l===null){let d=n.parent;for(;d!==null;){if(e===d)break t;var u=d.next;if(u!==null){n=u;continue t}d=d.parent}}n=l}return t}function ul(e){var t;for(Jr();po.length>0;)Fo=!0,Qi(),Jr();return t}async function dl(){await Promise.resolve(),ul()}function o(e){var t=e.f,n=(t&Ve)!==0;if(Pn!==null&&Pn.add(e),Zt!==null&&!tn){fn!==null&&fn.includes(e)&&Ls();var r=Zt.deps;e.rv<jo&&(e.rv=jo,Ne===null&&r!==null&&r[Ge]===e?Ge++:Ne===null?Ne=[e]:(!In||!Ne.includes(e))&&Ne.push(e))}else if(n&&e.deps===null&&e.effects===null){var i=e,s=i.parent;s!==null&&(s.f&Ke)===0&&(i.f^=Ke)}return n&&(i=e,so(i)&&Yi(i)),e.v}function fl(e){var t=Pn;Pn=new Set;var n=Pn,r;try{if(ce(e),t!==null)for(r of Pn)t.add(r)}finally{Pn=t}return n}function ou(e){var t=fl(()=>ce(e));for(var n of t)if((n.f&Ai)!==0)for(const r of n.deps||[])(r.f&Ve)===0&&xo(r,r.v);else xo(n,n.v)}function ce(e){var t=tn;try{return tn=!0,e()}finally{tn=t}}const hl=-7169;function en(e,t){e.f=e.f&hl|t}function st(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(dn in e)xr(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&dn in n&&xr(n)}}}function xr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{xr(e[r],t)}catch{}const n=Mr(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ei(n);for(let i in r){const s=r[i].get;if(s)try{s.call(e)}catch{}}}}}const gl=["touchstart","touchmove"];function vl(e){return gl.includes(e)}let ti=!1;function pl(){ti||(ti=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function ts(e){var t=Zt,n=ee;kn(null),Tn(null);try{return e()}finally{kn(t),Tn(n)}}function ml(e,t,n,r=n){e.addEventListener(t,()=>ts(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),pl()}const _l=new Set,ei=new Set;function yl(e,t,n,r={}){function i(s){if(r.capture||ho.call(t,s),!s.cancelBubble)return ts(()=>n==null?void 0:n.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?zr(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Nt(e,t,n,r,i){var s={capture:r,passive:i},l=yl(e,t,n,s);(t===document.body||t===window||t===document)&&Rr(()=>{t.removeEventListener(e,l,s)})}function ho(e){var D;var t=this,n=t.ownerDocument,r=e.type,i=((D=e.composedPath)==null?void 0:D.call(e))||[],s=i[0]||e.target,l=0,c=e.__root;if(c){var a=i.indexOf(c);if(a!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;a<=u&&(l=a)}if(s=i[l]||e.target,s!==t){Ci(e,"currentTarget",{configurable:!0,get(){return s||n}});var d=Zt,h=ee;kn(null),Tn(null);try{for(var f,m=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var w=s["__"+r];if(w!==void 0&&(!s.disabled||e.target===s))if(No(w)){var[y,...p]=w;y.apply(s,[e,...p])}else w.call(s,e)}catch(P){f?m.push(P):f=P}if(e.cancelBubble||v===t||v===null)break;s=v}if(f){for(let P of m)queueMicrotask(()=>{throw P});throw f}}finally{e.__root=t,delete e.currentTarget,kn(d),Tn(h)}}}function es(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Co(e,t){var n=ee;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Gt(e,t){var n=(t&ki)!==0,r=(t&Fs)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=es(s?e:"<!>"+e),n||(i=_n(i)));var l=r||zi?document.importNode(i,!0):i.cloneNode(!0);if(n){var c=_n(l),a=l.lastChild;Co(c,a)}else Co(l,l);return l}}function hn(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&ki)!==0,s=`<${n}>${r?e:"<!>"+e}</${n}>`,l;return()=>{if(!l){var c=es(s),a=_n(c);if(i)for(l=document.createDocumentFragment();_n(a);)l.appendChild(_n(a));else l=_n(a)}var u=l.cloneNode(!0);if(i){var d=_n(u),h=u.lastChild;Co(d,h)}else Co(u,u);return u}}function Pt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Tr();return e.append(t,n),Co(t,n),e}function R(e,t){e!==null&&e.before(t)}function ns(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function bl(e,t){return xl(e,t)}const Kn=new Map;function xl(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:l=!0}){Ks();var c=new Set,a=h=>{for(var f=0;f<h.length;f++){var m=h[f];if(!c.has(m)){c.add(m);var v=vl(m);t.addEventListener(m,ho,{passive:v});var w=Kn.get(m);w===void 0?(document.addEventListener(m,ho,{passive:v}),Kn.set(m,1)):Kn.set(m,w+1)}}};a(Ar(_l)),ei.add(a);var u=void 0,d=Qs(()=>{var h=n??t.appendChild(Tr());return Qn(()=>{if(s){oe({});var f=Dt;f.c=s}i&&(r.$$events=i),u=e(h,r)||{},s&&re()}),()=>{var v;for(var f of c){t.removeEventListener(f,ho);var m=Kn.get(f);--m===0?(document.removeEventListener(f,ho),Kn.delete(f)):Kn.set(f,m)}ei.delete(a),h!==n&&((v=h.parentNode)==null||v.removeChild(h))}});return wl.set(u,d),u}let wl=new WeakMap;function kt(e,t,n=!1){var r=e,i=null,s=null,l=ke,c=n?Qo:0,a=!1;const u=(h,f=!0)=>{a=!0,d(f,h)},d=(h,f)=>{l!==(l=h)&&(l?(i?Xo(i):f&&(i=Qn(()=>f(r))),s&&wo(s,()=>{s=null})):(s?Xo(s):f&&(s=Qn(()=>f(r))),i&&wo(i,()=>{i=null})))};nr(()=>{a=!1,t(u),a||d(null,null)},c)}function Zn(e,t){return t}function Sl(e,t,n,r){for(var i=[],s=t.length,l=0;l<s;l++)Or(t[l].e,i,!0);var c=s>0&&i.length===0&&n!==null;if(c){var a=n.parentNode;Us(a),a.append(n),r.clear(),Mn(e,t[0].prev,t[s-1].next)}Hi(i,()=>{for(var u=0;u<s;u++){var d=t[u];c||(r.delete(d.k),Mn(e,d.prev,d.next)),Ln(d.e,!c)}})}function cn(e,t,n,r,i,s=null){var l=e,c={flags:t,items:new Map,first:null},a=(t&Li)!==0;if(a){var u=e;l=u.appendChild(Tr())}var d=null,h=!1,f=Te(()=>{var m=n();return No(m)?m:m==null?[]:Ar(m)});nr(()=>{var m=o(f),v=m.length;h&&v===0||(h=v===0,Cl(m,c,l,i,t,r,n),s!==null&&(v===0?d?Xo(d):d=Qn(()=>s(l)):d!==null&&wo(d,()=>{d=null})),o(f))})}function Cl(e,t,n,r,i,s,l){var q,nt,F,T;var c=(i&Os)!==0,a=(i&(Lr|kr))!==0,u=e.length,d=t.items,h=t.first,f=h,m,v=null,w,y=[],p=[],D,P,E,L;if(c)for(L=0;L<u;L+=1)D=e[L],P=s(D,L),E=d.get(P),E!==void 0&&((q=E.a)==null||q.measure(),(w??(w=new Set)).add(E));for(L=0;L<u;L+=1){if(D=e[L],P=s(D,L),E=d.get(P),E===void 0){var G=f?f.e.nodes_start:n;v=Nl(G,t,v,v===null?t.first:v.next,D,P,L,r,i,l),d.set(P,v),y=[],p=[],f=v.next;continue}if(a&&El(E,D,L,i),(E.e.f&wn)!==0&&(Xo(E.e),c&&((nt=E.a)==null||nt.unfix(),(w??(w=new Set)).delete(E))),E!==f){if(m!==void 0&&m.has(E)){if(y.length<p.length){var V=p[0],z;v=V.prev;var Z=y[0],j=y[y.length-1];for(z=0;z<y.length;z+=1)ni(y[z],V,n);for(z=0;z<p.length;z+=1)m.delete(p[z]);Mn(t,Z.prev,j.next),Mn(t,v,Z),Mn(t,j,V),f=V,v=j,L-=1,y=[],p=[]}else m.delete(E),ni(E,f,n),Mn(t,E.prev,E.next),Mn(t,E,v===null?t.first:v.next),Mn(t,v,E),v=E;continue}for(y=[],p=[];f!==null&&f.k!==P;)(f.e.f&wn)===0&&(m??(m=new Set)).add(f),p.push(f),f=f.next;if(f===null)continue;E=f}y.push(E),v=E,f=E.next}if(f!==null||m!==void 0){for(var mt=m===void 0?[]:Ar(m);f!==null;)(f.e.f&wn)===0&&mt.push(f),f=f.next;var gt=mt.length;if(gt>0){var et=(i&Li)!==0&&u===0?n:null;if(c){for(L=0;L<gt;L+=1)(F=mt[L].a)==null||F.measure();for(L=0;L<gt;L+=1)(T=mt[L].a)==null||T.fix()}Sl(t,mt,et,d)}}c&&zr(()=>{var ot;if(w!==void 0)for(E of w)(ot=E.a)==null||ot.apply()}),ee.first=t.first&&t.first.e,ee.last=v&&v.e}function El(e,t,n,r){(r&Lr)!==0&&xo(e.v,t),(r&kr)!==0?xo(e.i,n):e.i=n}function Nl(e,t,n,r,i,s,l,c,a,u){var d=(a&Lr)!==0,h=(a&zs)===0,f=d?h?tr(i):He(i):i,m=(a&kr)===0?l:He(l),v={i:m,v:f,k:s,a:null,e:null,prev:n,next:r};try{return v.e=Qn(()=>c(e,f,m,u),Hs),v.e.prev=n&&n.e,v.e.next=r&&r.e,n===null?t.first=v:(n.next=v,n.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function ni(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==r;){var l=er(s);i.before(s),s=l}}function Mn(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Wt(e,t,n,r,i){var c;var s=(c=t.$$slots)==null?void 0:c[n],l=!1;s===!0&&(s=t[n==="default"?"children":n],l=!0),s===void 0?i!==null&&i(e):s(e,l?()=>r:r)}function Wr(e){const t={};e.children&&(t.default=!0);for(const n in e.$$slots)t[n]=!0;return t}function uo(e,t,n){var r=e,i,s;nr(()=>{i!==(i=t())&&(s&&(wo(s),s=null),i&&(s=Qn(()=>n(r,i))))},Qo)}function Xn(e,t,n){qn(()=>{var r=ce(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,s={};io(()=>{var l=n();st(l),i&&Dr(s,l)&&(s=l,r.update(l))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}const oi=[...` 	
\r\fÂ \v\uFEFF`];function Al(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,l=0;(l=r.indexOf(i,l))>=0;){var c=l+s;(l===0||oi.includes(r[l-1]))&&(c===r.length||oi.includes(r[c]))?r=(l===0?"":r.substring(0,l))+r.substring(c+1):l=c}}return r===""?null:r}function me(e,t,n,r,i,s){var l=e.__className;if(l!==n){var c=Al(n,r,s);c==null?e.removeAttribute("class"):t?e.className=c:e.setAttribute("class",c),e.__className=n}else if(s){i??(i={});for(var a in s){var u=!!s[a];u!==!!i[a]&&e.classList.toggle(a,u)}}return s}function W(e,t,n,r){var i=e.__attributes??(e.__attributes={});i[t]!==(i[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Cs]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Ml(e).includes(t)?e[t]=n:e.setAttribute(t,n))}var ri=new Map;function Ml(e){var t=ri.get(e.nodeName);if(t)return t;ri.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=Ei(r);for(var s in n)n[s].set&&t.push(s);r=Mr(r)}return t}function X(e,t,n,r){var i=e.__styles??(e.__styles={});i[t]!==n&&(i[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}function Pl(e,t,n=t){var r=Mo();ml(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=fr(e)?hr(s):s,n(s),r&&s!==(s=t())){var l=e.selectionStart,c=e.selectionEnd;e.value=s??"",c!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(c,e.value.length))}}),ce(t)==null&&e.value&&n(fr(e)?hr(e.value):e.value),io(()=>{var i=t();fr(e)&&i===hr(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function fr(e){var t=e.type;return t==="number"||t==="range"}function hr(e){return e===""?null:+e}function Gr(e,t,n){var r=bn(e,t);r&&r.set&&(e[t]=n,Rr(()=>{e[t]=null}))}var Dn,Jn,Eo,Vo,os;const $o=class $o{constructor(t){ao(this,Vo);ao(this,Dn,new WeakMap);ao(this,Jn);ao(this,Eo);dr(this,Eo,t)}observe(t,n){var r=pn(this,Dn).get(t)||new Set;return r.add(n),pn(this,Dn).set(t,r),Kr(this,Vo,os).call(this).observe(t,pn(this,Eo)),()=>{var i=pn(this,Dn).get(t);i.delete(n),i.size===0&&(pn(this,Dn).delete(t),pn(this,Jn).unobserve(t))}}};Dn=new WeakMap,Jn=new WeakMap,Eo=new WeakMap,Vo=new WeakSet,os=function(){return pn(this,Jn)??dr(this,Jn,new ResizeObserver(t=>{for(var n of t){$o.entries.set(n.target,n);for(var r of pn(this,Dn).get(n.target)||[])r(n)}}))},Hr($o,"entries",new WeakMap);let wr=$o;var Dl=new wr({box:"border-box"});function ii(e,t,n){var r=Dl.observe(e,()=>n(e[t]));qn(()=>(ce(()=>n(e[t])),r))}function si(e,t){return e===t||(e==null?void 0:e[dn])===t}function to(e={},t,n,r){return qn(()=>{var i,s;return io(()=>{i=s,s=[],ce(()=>{e!==n(...s)&&(t(e,...s),i&&si(n(...i),e)&&t(null,...i))})}),()=>{zr(()=>{s&&si(n(...s),e)&&t(null,...s)})}}),e}function mo(e){return function(...t){var n=t[0];n.target===this&&(e==null||e.apply(this,t))}}function un(e){return function(...t){var n=t[0];return n.stopPropagation(),e==null?void 0:e.apply(this,t)}}function Ye(e){return function(...t){var n=t[0];return n.preventDefault(),e==null?void 0:e.apply(this,t)}}function pe(e=!1){const t=Dt,n=t.l.u;if(!n)return;let r=()=>st(t.s);if(e){let i=0,s={};const l=Qe(()=>{let c=!1;const a=t.s;for(const u in a)a[u]!==s[u]&&(s[u]=a[u],c=!0);return c&&i++,i});r=()=>o(l)}n.b.length&&Js(()=>{li(t,r),bo(n.b)}),Yo(()=>{const i=ce(()=>n.m.map(xs));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&Yo(()=>{li(t,r),bo(n.a)})}function li(e,t){if(e.l.s)for(const n of e.l.s)o(n);t()}function ae(e,t){var s;var n=(s=e.$$events)==null?void 0:s[t.type],r=No(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,t)}function Yr(e,t,n){if(e==null)return t(void 0),n&&n(void 0),xn;const r=ce(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Un=[];function Ko(e,t){return{subscribe:S(e,t).subscribe}}function S(e,t=xn){let n=null;const r=new Set;function i(c){if(Dr(e,c)&&(e=c,n)){const a=!Un.length;for(const u of r)u[1](),Un.push(u,e);if(a){for(let u=0;u<Un.length;u+=2)Un[u][0](Un[u+1]);Un.length=0}}}function s(c){i(c(e))}function l(c,a=xn){const u=[c,a];return r.add(u),r.size===1&&(n=t(i,s)||xn),c(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:l}}function _o(e,t,n){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return Ko(n,(l,c)=>{let a=!1;const u=[];let d=0,h=xn;const f=()=>{if(d)return;h();const v=t(r?u[0]:u,l,c);s?l(v):h=typeof v=="function"?v:xn},m=i.map((v,w)=>Yr(v,y=>{u[w]=y,d&=~(1<<w),a&&f()},()=>{d|=1<<w}));return a=!0,f(),function(){bo(m),h(),a=!1}})}function k(e){let t;return Yr(e,n=>t=n)(),t}let Io=!1,Sr=Symbol();function C(e,t,n){const r=n[t]??(n[t]={store:null,source:tr(void 0),unsubscribe:xn});if(r.store!==e&&!(Sr in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=xn;else{var i=!0;r.unsubscribe=Yr(e,s=>{i?r.source.v=s:_(r.source,s)}),i=!1}return e&&Sr in n?k(e):o(r.source)}function yn(e,t,n){let r=n[t];return r&&r.store!==e&&(r.unsubscribe(),r.unsubscribe=xn),e}function K(e,t){return e.set(t),t}function xe(){const e={};function t(){Rr(()=>{for(var n in e)e[n].unsubscribe();Ci(e,Sr,{enumerable:!1,value:!0})})}return[e,t]}function yo(e,t,n){return e.set(n),t}function Il(e,t,n=1){return e.set(t+n),t}function Ll(e,t,n=1){const r=t+n;return e.set(r),r}function kl(e){var t=Io;try{return Io=!1,[e(),Io]}finally{Io=t}}const Tl={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(co(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];co(i)&&(i=i());const s=bn(i,t);if(s&&s.set)return s.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(co(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=bn(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===dn||t===Pi)return!1;for(let n of e.props)if(co(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){co(n)&&(n=n());for(const r in n)t.includes(r)||t.push(r)}return t}};function Xr(...e){return new Proxy({props:e},Tl)}function g(e,t,n,r){var V;var i=(n&Bs)!==0,s=!no||(n&Ws)!==0,l=(n&Ys)!==0,c=(n&Xs)!==0,a=!1,u;l?[u,a]=kl(()=>e[t]):u=e[t];var d=dn in e||Pi in e,h=l&&(((V=bn(e,t))==null?void 0:V.set)??(d&&t in e&&(z=>e[t]=z)))||void 0,f=r,m=!0,v=!1,w=()=>(v=!0,m&&(m=!1,c?f=ce(r):f=r),f);u===void 0&&r!==void 0&&(h&&s&&Ps(),u=w(),h&&h(u));var y;if(s)y=()=>{var z=e[t];return z===void 0?w():(m=!0,v=!1,z)};else{var p=(i?Qe:Te)(()=>e[t]);p.f|=Ai,y=()=>{var z=o(p);return z!==void 0&&(f=void 0),z===void 0?f:z}}if((n&Gs)===0)return y;if(h){var D=e.$$legacy;return function(z,Z){return arguments.length>0?((!s||!Z||D||a)&&h(Z?y():z),z):y()}}var P=!1,E=!1,L=tr(u),G=Qe(()=>{var z=y(),Z=o(L);return P?(P=!1,E=!0,Z):(E=!1,L.v=z)});return i||(G.equals=Ir),function(z,Z){if(Pn!==null&&(P=E,y(),o(L)),arguments.length>0){const j=Z?o(G):s&&l?Vn(z):z;return G.equals(j)||(P=!0,_(L,j),v&&f!==void 0&&(f=j),ce(()=>o(G))),z}return o(G)}}function nn(e){Dt===null&&oo(),no&&Dt.l!==null?Fr(Dt).m.push(e):Yo(()=>{const t=ce(e);if(typeof t=="function")return t})}function sr(e){Dt===null&&oo(),nn(()=>()=>ce(e))}function Rl(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function eo(){const e=Dt;return e===null&&oo(),(t,n,r)=>{var s;const i=(s=e.s.$$events)==null?void 0:s[t];if(i){const l=No(i)?i.slice():[i],c=Rl(t,n,r);for(const a of l)a.call(e.x,c);return!c.defaultPrevented}return!0}}function Ol(e){Dt===null&&oo(),Dt.l===null&&Ii(),Fr(Dt).b.push(e)}function rs(e){Dt===null&&oo(),Dt.l===null&&Ii(),Fr(Dt).a.push(e)}function Fr(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const zl="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zl);Rs();const Bl="modulepreload",Wl=function(e,t){return new URL(e,t).href},ai={},fo=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const l=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),a=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=Wl(u,r),u in ai)return;ai[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let v=l.length-1;v>=0;v--){const w=l[v];if(w.href===u&&(!d||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Bl,d||(m.as="script"),m.crossOrigin="",m.href=u,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((v,w)=>{m.addEventListener("load",v),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&s(c.reason);return t().catch(s)})};function Gl(e,t){const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.sqrt(n*n+r*r)}function Yl(){const e=()=>Math.floor(Math.random()*256),t=e(),n=e(),r=e();return`rgb(${t},${n},${r})`}const Xl={"(":"round","[":"square","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},ci={"-":"straight","~":"bezier"},is={"(":")","[":"]","{":"}"},Fl=/[-=~]*>(?:\s*\|(.+?)\|)?/g,ql=e=>{const t=e.split(`
`),n={parentNodes:[],nodeList:{}};for(const r of t){const{parentNodes:i,childNodes:s,edge:l}=jl(r);for(const c of i){n.nodeList[c.id]||n.parentNodes.push(c);for(const a of s){if(n.nodeList[c.id]){if(n.nodeList[a.id]&&n.nodeList[a.id].children.some(({node:u})=>u.id===c.id))throw new Error("Circular reference detected");n.nodeList[c.id].children.push({node:n.nodeList[a.id]||a,...l})}else c.children.push({node:n.nodeList[a.id]||a,...l}),n.nodeList[c.id]=c;n.nodeList[a.id]?n.nodeList[a.id].parents.push({node:n.nodeList[c.id]||c}):(a.parents.push({node:n.nodeList[c.id]||c}),n.nodeList[a.id]=a),n.parentNodes=n.parentNodes.filter(u=>u.id!==a.id)}}}return n},jl=e=>{const t=[],n=[],r=e.trim();let i="";const s=r.match(Fl);if(s)i=s[0];else throw new Error("Invalid edge");const[l,c]=r.split(i);for(const u of l.split("&"))t.push(ui(u));for(const u of c.split("&"))n.push(ui(u));const a=Hl(i);return{parentNodes:t,childNodes:n,edge:a}},ui=e=>{e=e.trim();const t=e[0],n=e.slice(1);let r="",i="";const s="Default",l={shape:""},c=[];for(let a=0;a<n.length;a++)if(Kl(n[a]))c.push(n[a]);else if(is[c[c.length-1]]===n[a]){i=Xl[c.join("")];break}else r+=n[a];return l.shape=i,l.content=r,{id:t,data:l,type:s,children:[],parents:[],depth:0,nesting:0}},Hl=e=>{e=e.trim();let t="";const[n,r]=e.split("|"),i=n[0];if(i in ci)t=ci[i];else throw new Error("Not a valid edge type");return r?{shape:t,content:r.trim(),length:Math.floor((n.trim().length-1)/2)}:{shape:t,length:Math.floor((n.trim().length-1)/2)}};function Kl(e){return e in is}function Ul(){return Math.random().toString(36).substring(7)}function Vl(e,t){const n=Math.sign(e.x).toString(),r=Math.sign(e.y).toString(),i=Math.sign(t.x).toString(),s=Math.sign(t.y).toString();return`${n}${r}${i}${s}`}function $l(e,t){return{1001:`a ${e} ${e} 0 0 1 ${e} ${e}`,"0110":`a ${e} ${e} 0 0 0 ${e} ${e}`,"100-1":`a ${e} ${e} 0 0 0 ${e} -${e}`,"0-110":`a ${e} ${e} 0 0 1 ${e} -${e}`,"-1001":`a ${e} ${e} 0 0 0 -${e} ${e}`,"01-10":`a ${e} ${e} 0 0 1 -${e} ${e}`,"-100-1":`a ${e} ${e} 0 0 1 -${e} -${e}`,"0-1-10":`a ${e} ${e} 0 0 0 -${e} -${e}`}[t]||""}function di(e,t){const n=t*(Math.PI/180),r=e.x*Math.cos(n)-e.y*Math.sin(n),i=e.x*Math.sin(n)+e.y*Math.cos(n);return{x:r,y:i}}const fi=(e,t,n,r)=>e+` l ${t} ${n} `+r,Re=S({x:0,y:0}),Cr=S(0),Ue=S(!1),Er=S(!1),ss=Ko({x:0,y:0},e=>{const t=s=>{e({x:s.clientX,y:s.clientY})},n=s=>{if(s.touches.length===2){const l=Gl(s.touches[0],s.touches[1]);Cr.set(l);const c={x:s.touches[0].clientX,y:s.touches[0].clientY};e(c)}else if(s.touches.length===1){const l=s.touches[0].clientX,c=s.touches[0].clientY;e({x:l,y:c}),Ue.set(!0)}},r=s=>{n(s),window.addEventListener("touchend",i),window.addEventListener("touchmove",n)},i=()=>{Ue.set(!1),Cr.set(0),window.removeEventListener("touchmove",n)};return document.addEventListener("mousemove",t),window.addEventListener("touchstart",r,!0),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchstart",r),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",i)}});var Zl=Gt("<div><div></div></div>");function Jl(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(L,"$groups",n),s=()=>C(ss,"$cursorPositionRaw",n),l=()=>C(o(c),"$selectedNodes",n),c=b(),a=b(),u=b(),d=b(),h=b(),f=b(),m=b(),v=b(),w=b();let y=g(t,"graph",8),p=g(t,"anchor",8),D=g(t,"adding",8,!1),P=g(t,"creating",8,!1),E=g(t,"color",8,null);const{groups:L}=y();let G,V=b();nn(z);function z(){G=Array.from(document.querySelectorAll(".svelvet-node")).map(nt=>{const{top:F,left:T,width:ot,height:dt}=nt.getBoundingClientRect();return{id:nt.id,top:F,left:T,width:ot,height:dt}})}function Z(){if(!G)return;const q=G.reduce((nt,F)=>{if(o(h)+p().left<=F.left&&o(d)+p().top<=F.top&&o(h)+p().left+Math.abs(o(u))>=F.left+F.width&&o(d)+p().top+Math.abs(o(a))>=F.top+F.height){const T=F.id,ot=y().nodes.get(T);if(!ot)return nt;nt.push(ot)}return nt},[]);D()?q.forEach(nt=>{l().add(nt)}):K(o(c),new Set(q)),K(o(c),l())}x(()=>i(),()=>{yn(_(c,i().selected.nodes),"$selectedNodes",n)}),x(()=>(s(),st(p())),()=>{_(a,s().y-p().y-p().top)}),x(()=>(s(),st(p())),()=>{_(u,s().x-p().x-p().left)}),x(()=>(st(p()),o(a)),()=>{_(d,Math.min(p().y,p().y+o(a)))}),x(()=>(st(p()),o(u)),()=>{_(h,Math.min(p().x,p().x+o(u)))}),x(()=>o(d),()=>{_(f,`${o(d)}px`)}),x(()=>o(h),()=>{_(m,`${o(h)}px`)}),x(()=>o(a),()=>{_(v,`${Math.abs(o(a))}px`)}),x(()=>o(u),()=>{_(w,`${Math.abs(o(u))}px`)}),x(()=>(o(u),o(a)),()=>{(o(u)||o(a))&&Z()}),Ae(),pe();var j=Zl();let mt;var gt=Mt(j);let et;to(gt,q=>_(V,q),()=>o(V)),Ht(()=>{mt=me(j,1,"selection-border svelte-10ds4jd",null,mt,{creating:P()}),X(j,"--prop-selection-box-color",E()),X(j,"height",o(v)),X(j,"width",o(w)),X(j,"top",o(f)),X(j,"left",o(m)),et=me(gt,1,"selection-box svelte-10ds4jd",null,et,{creating:P()})}),R(e,j),re(),r()}const Ql=3,ta=.1,ea=10,na=100,oa=50,ra="#000",ia="#fff",sa="12px",la=22,aa=1.4,ca=40,go={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};var ua=hn('<circle class="background-dot svelte-rryw83"></circle>'),da=hn('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),fa=hn('<circle class="background-dot svelte-rryw83"></circle>'),ha=hn('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),ga=hn('<pattern id="graph-coarse-pattern" patternUnits="userSpaceOnUse"><!></pattern>'),va=hn('<rect width="100%" height="100%" fill="url(#graph-coarse-pattern)"></rect>'),pa=Gt('<div id="background-wrapper" class="svelte-rryw83"><svg class="svelte-rryw83"><defs><pattern id="graph-pattern" patternUnits="userSpaceOnUse"><!></pattern><!></defs><rect width="100%" height="100%" fill="url(#graph-pattern)"></rect><!></svg></div>');function ma(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(G,"$translationStore",n),s=()=>C(L,"$scaleStore",n),l=b(),c=b(),a=b(),u=b(),d=b(),h=Lt("graph");let f=g(t,"style",8,"dots"),m=g(t,"gridWidth",8,la),v=g(t,"dotSize",8,aa),w=g(t,"bgColor",8,null),y=g(t,"dotColor",8,null),p=g(t,"opacityThreshold",8,3),D=g(t,"majorGrid",8,0),P=g(t,"minOpacity",8,.4);const E=h.transforms,L=E.scale,G=E.translation;let V=b(),z=b(),Z=b(),j=b(),mt=b(),gt=b(1),et=b(1);x(()=>i(),()=>{_(l,i())}),x(()=>s(),()=>{_(c,s())}),x(()=>(o(c),st(m())),()=>{_(a,o(c)*m())}),x(()=>(o(c),st(v())),()=>{_(u,o(c)*v()/2)}),x(()=>o(a),()=>{_(d,o(a)/2)}),x(()=>(o(z),o(V),o(Z),o(u),o(c),o(l),st(p()),st(P())),()=>{var ht,B;_(z,((ht=o(V))==null?void 0:ht.offsetWidth)||0),_(Z,((B=o(V))==null?void 0:B.offsetHeight)||0),_(j,(o(z)+o(u))*(1-o(c))/2+o(l).x),_(mt,(o(Z)+o(u))*(1-o(c))/2+o(l).y),_(gt,o(c)>p()?1:o(c)/p()+P()),_(et,o(c)>p()/3?1:o(c)/(p()/3)+P())}),Ae(),pe();var q=pa(),nt=Mt(q),F=Mt(nt),T=Mt(F),ot=Mt(T);{var dt=ht=>{var B=ua();Ht(()=>{W(B,"r",o(u)),W(B,"cx",o(d)),W(B,"cy",o(d)),X(B,"--calculated-dot-color",y())}),R(ht,B)},I=ht=>{var B=Pt(),H=ct(B);{var zt=ut=>{var Y=da(),bt=ct(Y);W(bt,"y1",0);var xt=tt(bt);W(xt,"x1",0),Ht(()=>{W(bt,"x1",o(d)),W(bt,"x2",o(d)),W(bt,"y2",o(a)),W(bt,"stroke-width",o(u)),X(bt,"--calculated-dot-color",y()),W(xt,"y1",o(d)),W(xt,"y2",o(d)),W(xt,"x2",o(a)),W(xt,"stroke-width",o(u)),X(xt,"--calculated-dot-color",y())}),R(ut,Y)};kt(H,ut=>{f()==="lines"&&ut(zt)},!0)}R(ht,B)};kt(ot,ht=>{f()==="dots"?ht(dt):ht(I,!1)})}var At=tt(T);{var vt=ht=>{var B=ga(),H=Mt(B);{var zt=Y=>{var bt=fa();Ht(()=>{W(bt,"r",o(u)*2),W(bt,"cx",o(d)),W(bt,"cy",o(d)),X(bt,"--calculated-dot-color",y())}),R(Y,bt)},ut=Y=>{var bt=Pt(),xt=ct(bt);{var _t=pt=>{var yt=ha(),ft=ct(yt);W(ft,"y1",0);var Kt=tt(ft);W(Kt,"x1",0),Ht(()=>{W(ft,"x1",o(d)),W(ft,"x2",o(d)),W(ft,"y2",o(a)*D()),W(ft,"stroke-width",o(u)*1.2),X(ft,"--calculated-dot-color",y()),W(Kt,"y1",o(d)),W(Kt,"y2",o(d)),W(Kt,"x2",o(a)*D()),W(Kt,"stroke-width",o(u)*1.2),X(Kt,"--calculated-dot-color",y())}),R(pt,yt)};kt(xt,pt=>{f()==="lines"&&pt(_t)},!0)}R(Y,bt)};kt(H,Y=>{f()==="dots"?Y(zt):Y(ut,!1)})}Ht(()=>{W(B,"x",o(j)),W(B,"y",o(mt)),W(B,"width",o(a)*D()),W(B,"height",o(a)*D())}),R(ht,B)};kt(At,ht=>{D()>0&&ht(vt)})}var A=tt(F),It=tt(A);{var Yt=ht=>{var B=va();Ht(()=>W(B,"opacity",o(et))),R(ht,B)};kt(It,ht=>{D()>0&&ht(Yt)})}to(q,ht=>_(V,ht),()=>o(V)),Ht(()=>{X(q,"--calculated-background-color",w()),W(T,"x",o(j)),W(T,"y",o(mt)),W(T,"width",o(a)),W(T,"height",o(a)),W(A,"opacity",o(gt))}),R(e,q),re(),r()}var _a=Gt('<div role="button" tabindex="0" class="bounding-box-border svelte-1e5jg43"><div class="bounding-box svelte-1e5jg43"></div></div>');function ya(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(d(),"$position",n),s=()=>C(m,"$width",n),l=()=>C(v,"$height",n),c=()=>C(h(),"$color",n),a=b();let u=g(t,"dimensions",8),d=g(t,"position",8),h=g(t,"color",8),f=g(t,"groupName",8);const{width:m,height:v}=u(),w=eo();function y(){w("groupClick",{groupName:f()})}x(()=>st(f()),()=>{_(a,`${f()}-bounding-box`)}),Ae(),pe();var p=_a(),D=Mt(p);Ht(()=>{W(p,"id",o(a)),W(p,"style",`border: solid 4px ${c()??""};`),X(p,"top",`${i().y}px`),X(p,"left",`${i().x}px`),X(p,"width",`${s()}px`),X(p,"height",`${l()}px`),X(D,"background-color",c())}),Nt("contextmenu",p,Ye(un(function(P){ae.call(this,t,P)}))),Nt("mousedown",p,Ye(un(y))),R(e,p),re(),r()}function ba(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(l,"$groupBoxes",n),l=Lt("graph").groupBoxes;pe();var c=Pt(),a=ct(c);cn(a,1,()=>Array.from(i()),([u,d])=>u,(u,d)=>{let h=()=>o(d)[0];ya(u,Xr(()=>o(d)[1],{get groupName(){return h()},$$events:{groupClick(m){ae.call(this,t,m)}}}))}),R(e,c),re(),r()}function gr(e){const t=e.style.width,n=e.style.height;e.style.width="fit-content",e.style.height="fit-content";const r=e.offsetWidth,i=e.offsetHeight;return e.style.width=t,e.style.height=n,[r,i]}function ls(e,t,n,r,i){const s={x:0,y:0},l=r.x-i.left-i.width/2,c=r.y-i.top-i.height/2,a=(l-n.x)/e,u=(c-n.y)/e;return s.x=l-a*t,s.y=c-u*t,s}function as(e,t,n){const r=t*n,i=e-r;return Number(Math.max(ta,Math.min(Ql,i)).toFixed(9))}const Po=(e,t,n,r,i,s,l)=>{const{clientX:c,clientY:a}=e,u=s,d=c-n,h=a-t,f=l.x,m=l.y,v=r*(1-s)/2,w=i*(1-s)/2,y=d-f-v,p=h-m-w,D=y/u,P=p/u;return{x:D,y:P}};function xa(e,t,n){const{top:r,left:i,width:s,height:l}=k(e),c=k(t.scale),a=k(t.translation);return{scaled:Po({clientX:n.x,clientY:n.y},r,i,s,l,c,a),scale:c}}function wa(e,t,n){const{scale:r,translation:i}=n,s=k(r),l=k(i),c=t.x-e.x,a=t.y-e.y,u=l.x+c*s,d=l.y+a*s;return{x:u,y:d}}function Sa(e,t){return e.x*t.x+e.y*t.y}function Ca(e,t,n){const r=[],i=t.x-e.x,s=t.y-e.y,l=Na(e.direction,t.direction),c=Sa(e.direction,t.direction)===0,a=Ea(e,t),u=ie(e.direction,-1,-1),d=ie(t.direction,-1,-1),h={x:Math.abs(e.direction.y),y:Math.abs(e.direction.x)},f=ie(e.direction,i-n*e.direction.x*(c?1:l?0:2),s-n*e.direction.y*(c?1:l?0:2)),m=ie(t.direction,i+n*t.direction.x*(c?1:l?0:2),s+n*t.direction.y*(c?1:l?0:2)),v=Math.sign(f.x)===-1||Math.sign(f.y)===-1,w=Math.sign(m.x)===1||Math.sign(m.y)===1,y=Math.abs(i),p=Math.abs(s),D=ie(e.direction,n,n),P=ie(d,n,n),E=ie(t.direction,n,n),L=ie(e.direction,y,p),G=ie(d,y,p),V=ie(e.direction,y/2,p/2),z=ie(d,y/2,p/2),Z=ie(h,i,s),j=!a&&!w&&!v,mt=e.x+D.x,gt=e.y+D.y,et=t.x+E.x,q=t.y+E.y;if(v&&r.push(D),a&&!w&&!v)r.push(L),r.push(G);else if(l)v||r.push(ie(e.direction,n+y,n+p)),r.push(Z),w||r.push(ie(d,n+y,n+p));else if(j)r.push(V),r.push(Z),r.push(z);else if(v&&w)if(c){const nt=Math.abs(mt-et),F=Math.abs(gt-q);r.push(ie(t.direction,y<n*2?t.direction.x*(i+t.direction.x*n):y+n,p<n*2?t.direction.y*(s+t.direction.y*n):p+n)),r.push(ie(u,nt,F))}else{const nt=Math.abs(mt-et),F=Math.abs(gt-q);r.push(ie(h,i/2,s/2)),r.push(ie(t.direction,nt,F)),r.push(ie(h,i/2,s/2))}else if(v){const nt=Math.abs(mt-t.x),F=Math.abs(gt-t.y);r.push(ie(d,y<n*2?y-n:y/2,p<n*2?p-n:p/2)),r.push(ie(u,nt,F)),r.push(ie(d,Math.max(n,y/2),Math.max(n,p/2)))}else if(w){const nt=Math.abs(et-e.x),F=Math.abs(q-e.y);r.push(ie(e.direction,Math.max(n,y/2),Math.max(n,p/2))),r.push(ie(t.direction,nt,F)),r.push(ie(e.direction,y<n*2?y-n:y/2,p<n*2?p-n:p/2))}return w&&r.push(P),r}function Ea(e,t){const{x:n,y:r}=e.direction,{x:i,y:s}=t.direction,l=t.x-e.x,c=t.y-e.y;return n*s===i*r?!1:Math.sign(c)===Math.sign(r+s)!=(Math.sign(l)===Math.sign(n+i))}function ie(e,t,n){return{x:e.x*t,y:e.y*n}}function Na(e,t){return e.x===t.x&&e.y===t.y}function Aa(e,t){const{width:n,height:r}=e,{top:i,left:s,right:l,bottom:c}=t,a=l-s,u=c-i;if(!a||!u)return{x:null,y:null,scale:null};const d=s+a/2,h=i+u/2,f=Math.min(n/a,r/u)*.8,m=n/2,v=r/2,w=m-d,y=v-h;return{x:w*f,y:y*f,scale:f}}const Lo=(e,t,n)=>Math.min(Math.abs(e||t)/2,n);function vr(e,t){const r=e.getTotalLength()*t;return e.getPointAtLength(r)}function Uo(){const e=new Map,{subscribe:t,set:n,update:r}=S(e);return{subscribe:t,set:n,update:r,add:(s,l)=>(r(c=>(c.set(l,s),c)),e),get:s=>e.get(s)||null,getAll:()=>Array.from(e.values()),delete:s=>{let l=!1;return r(c=>(c.delete(s),l=!0,c)),l},count:()=>e.size}}function Ma(e){const{id:t,inputs:n,outputs:r,resizable:i,dimensions:s,editable:l,direction:c,zIndex:a,position:u,selectionColor:d,borderWidth:h,edge:f}=e,{bgColor:m,borderColor:v,rotation:w,borderRadius:y,connections:p,textColor:D,locked:P,group:E}=e,L=Uo(),G=(Z="self")=>{k(L).forEach(j=>{(Z==="self"||k(j.direction)===Z)&&j.recalculatePosition()})};return{id:typeof t=="string"&&t.slice(0,2)==="N-"?t:`N-${t}`,position:S({x:(u==null?void 0:u.x)||0,y:(u==null?void 0:u.y)||0}),dimensions:{width:S((s==null?void 0:s.width)||0),height:S((s==null?void 0:s.height)||(s==null?void 0:s.width))},group:S(E||null),locked:S(P||!1),inputs:S(n),outputs:S(r),recalculateAnchors:G,rotation:S(w||0),moving:S(!1),resizingWidth:S(!1),resizingHeight:S(!1),rotating:S(!1),editable:S(l||!1),resizable:S(i),anchors:L,zIndex:S(a||2),collapsed:S(!1),edge:f||null,borderRadius:S(y),bgColor:S(m||null),direction:S(c),label:S(e.label||""),borderColor:S(v||null),borderWidth:S(h),selectionColor:S(d||null),textColor:S(D||null),connections:S(p)}}function Pa(e,t){const n=[e,t].sort();return`${n[0]}+${n[1]}`}function hi(e,t,n){var c,a,u,d,h;const{source:r,target:i}=e,l={id:r.id&&i.id?Pa(r.id,i.id):"cursor",target:e.target,source:e.source,component:t,type:S((n==null?void 0:n.type)||null),color:(n==null?void 0:n.color)||S(null),width:S((n==null?void 0:n.width)||0),animated:S((n==null?void 0:n.animated)||!1),rendered:S(!1),start:(n==null?void 0:n.start)||null,end:(n==null?void 0:n.end)||null};if(n!=null&&n.disconnect&&(l.disconnect=!0),n!=null&&n.label){const f={text:S(n==null?void 0:n.label.text),color:S(((c=n==null?void 0:n.label)==null?void 0:c.color)||ra),textColor:S(((a=n==null?void 0:n.label)==null?void 0:a.textColor)||ia),fontSize:S(((u=n==null?void 0:n.label)==null?void 0:u.fontSize)||sa),dimensions:{width:S(((d=n==null?void 0:n.label.dimensions)==null?void 0:d.width)||na),height:S(((h=n==null?void 0:n.label.dimensions)==null?void 0:h.height)||oa)},borderRadius:S((n==null?void 0:n.label.borderRadius)||ea)};l.label=f}return l}function Da(){const e=new Map,t=new Set,{subscribe:n,set:r,update:i}=S(e),s={subscribe:n,set:r,update:i,add:(l,c)=>{if(typeof c!="string"){const a=Array.from(c),u=a[0],d=a[1];if(u.connected.update(h=>h.add(d)),d.connected.update(h=>h.add(u)),s.match(...Array.from(c)).length)return;t.forEach(h=>h(l,"connection"))}i(a=>(a.set(c,l),a))},getAll:()=>Array.from(e.values()),get:l=>e.get(l)||null,match:(...l)=>Array.from(e.keys()).filter(c=>c==="cursor"?!1:l.every(a=>a?c.has(a):!0)),fetch:(l,c)=>{const a=Array.from(e.keys()).filter(u=>u==="cursor"?!1:[l,c].every(d=>d?u.has(d):!0))[0];return e.get(a)||null},delete:l=>{if(typeof l!="string"){const a=Array.from(l),u=a[0],d=a[1];u.connected.update(h=>(h.delete(d),h)),d.connected.update(h=>(h.delete(u),h))}let c=!1;return i(a=>{const u=a.get(l);return u&&(a.delete(l),c=!0,typeof l!="string"&&t.forEach(d=>d(u,"disconnection"))),a}),c},onEdgeChange:l=>(t.add(l),()=>t.delete(l)),count:()=>e.size};return s}function Ia(e,t,n,r){return _o([e,t,n,r],([s,l,c,a])=>{const u={clientX:s.x,clientY:s.y};return Po(u,l.top,l.left,l.width,l.height,a,c)})}function La(e,t,n,r){const i=S({top:1/0,left:1/0,right:-1/0,bottom:-1/0}),s=S({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let l,c=k(t),a=k(n),u=k(r),d=c.width/a,h=c.height/a;function f(){const{x:v,y:w}=Po({clientX:c.left,clientY:c.top},c.top,c.left,c.width,c.height,a,u),y=k(s);i.set({top:Math.min(y.top,w),left:Math.min(y.left,v),right:Math.max(y.right,v+d),bottom:Math.max(y.bottom,h+w)})}function m(v=!1){let w=1/0,y=1/0,p=-1/0,D=-1/0;for(const P of e.getAll()){console.log("dentro del for, este es e node:",P);const{x:E,y:L}=k(P.position),G=k(P.dimensions.width),V=k(P.dimensions.height);y=Math.min(y,E),w=Math.min(w,L),p=Math.max(p,E+G),D=Math.max(D,L+V)}s.set({top:w,left:y,right:p,bottom:D}),f(),v&&(l=requestAnimationFrame(()=>m(v)))}return e.subscribe(()=>{console.log("dentro del nodes.subscribe...........Aqui no estan llegando los nodes"),m()}),Er.subscribe(v=>{v&&m(v),v||cancelAnimationFrame(l)}),Ue.subscribe(v=>{v&&m(v),v||cancelAnimationFrame(l)}),t.subscribe(()=>{c=k(t),d=c.width/a,h=c.height/a,f()}),n.subscribe(()=>{a=k(n),d=c.width/a,h=c.height/a,f()}),r.subscribe(()=>{u=k(r),f()}),{graphBounds:i,nodeBounds:s}}function ka(e,t,n){const{width:r,height:i,top:s,left:l}=e,c={clientX:r/2,clientY:i/2};return Po(c,s,l,r,i,n,t)}function cs(e,t){const{zoom:n,editable:r,translation:i,direction:s,locked:l,edge:c,nodes:a}=t,u=S({x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0}),d=S({top:0,left:0,width:0,height:0,bottom:0,right:0}),h=S(n),f=S(!1),m=Uo(),v=La(m,d,h,u),w=_o([d,u,h],([p,D,P])=>ka(p,D,P));return{id:e,nodes:m,edges:Da(),transforms:{translation:u,scale:h},maxZIndex:S(2),dimensions:d,bounds:v,center:w,mounted:f,direction:s||"LR",editable:r||!1,edge:c||null,editing:S(null),cursor:Ia(ss,d,u,h),locked:S(l||!1),groups:S({selected:{parent:S(null),nodes:S(new Set)},hidden:{parent:S(null),nodes:S(new Set)}}),groupBoxes:Uo(),activeGroup:S(null),initialNodePositions:S([])}}function Ta(e,t,n,r,i,s,l,c,a,u,d,h){const{width:f,height:m}=i,{x:v,y:w}=r,y=k(t.position),p=S({x:v-y.x+f/2,y:w-y.y+m/2}),D=_o([t.position,p],([Z,j])=>({x:Z.x+j.x,y:Z.y+j.y})),P=e.transforms,E=e.dimensions,L=S(a||"self"),G=()=>{const Z=document.getElementById(n),j=k(L),mt=go[j];if(!Z)return;const{x:gt,y:et,width:q,height:nt}=Z.getBoundingClientRect(),F=k(p),T=k(D),{scaled:ot,scale:dt}=xa(E,P,{x:gt,y:et}),I=ot.x-T.x,At=ot.y-T.y;p.set({x:F.x+I+q/dt/2+mt.x*q/dt/2,y:F.y+At+nt/dt/2+mt.y*nt/dt/2})},V=_o([t.moving,t.resizingWidth,t.resizingHeight,t.rotating],([Z,j,mt,gt])=>Z||j||mt||gt),z=_o([t.rotation],([Z])=>Z);return{id:n,position:D,offset:p,direction:L,dynamic:S(u||!1),type:c,edge:l,moving:V,mounted:S(!1),recalculatePosition:G,connected:S(new Set),store:s||null,inputKey:d||null,edgeColor:h||S(null),rotation:z,node:t}}const pr=Uo(),ko={width:200,height:100};function Bo(e,t){return{x:Math.round(e/ko.width)*ko.width,y:Math.round(t/ko.height)*ko.height}}const To=10;function us(e){const t=k(e);return Array.from(t).map(r=>k(r.position))}function gi(e,t){console.log("moveNodes called");let n;const r=k(e.groups),i=k(e.activeGroup);if(console.log("Graph Groups:",r),console.log("Active Group:",i),!i)return;const s=r[i].nodes;if(!s)return;const l=k(e.initialNodePositions),{x:c,y:a}=k(Re),u=Array.from(k(s)),d=k(e.groupBoxes);console.log("Group Boxes:",d),u.forEach(f=>f.moving.set(!0)),h();function h(){const f=k(e.cursor);let m=f.x-c,v=f.y-a;if(t){const y=Bo(m,v);m=y.x,v=y.y}const w={x:m,y:v};u.forEach((y,p)=>{const{group:D,position:P}=y,E=l[p];let L;if(i==="selected"){const G=k(D);G&&(L=d.get(G))}if(!L)Ra(E,w,P);else{const G=k(y.dimensions.width),V=k(y.dimensions.height),z=fs(L,G,V);ds(E,w,P,z)}}),k(Ue)?n=requestAnimationFrame(h):cancelAnimationFrame(n)}}function Ra(e,t,n){n.set({x:e.x+t.x,y:e.y+t.y})}function ds(e,t,n,r){n.set({x:Math.min(Math.max(r.left,e.x+t.x),r.right),y:Math.min(Math.max(r.top,e.y+t.y),r.bottom)})}function fs(e,t,n){const{x:r,y:i}=k(e.position);return console.log("Group Box Position:",{x:r,y:i}),{left:r+To,right:r+k(e.dimensions.width)-t-To,top:i+To,bottom:i+k(e.dimensions.height)-n-To}}function vi(e=1,t,n,r=.1){const i=k(t),{width:s,height:l,top:c,left:a}=i,u=n.scale,d=k(n.translation),h=k(u),f=as(h,e,r),m=ls(h,f,d,{x:s/2+a,y:l/2+c},i);u.set(f),n.translation.set(m)}var Oa=Gt('<div class="svelvet-graph-wrapper svelte-19pa6i0" role="presentation"><!></div>');function za(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(f,"$translation",n),s=()=>C(h,"$scale",n),l=()=>C(m,"$cursor",n),c=b(),a=b(),u=Lt("graph"),d=u.transforms,h=d.scale,f=d.translation,m=u.cursor;let v=g(t,"isMovable",8),w=b(),y=b(!1);function p(){K(f,wa(k(Re),l(),d)),_(w,requestAnimationFrame(p))}x(()=>i(),()=>{_(c,i())}),x(()=>(o(c),s()),()=>{_(a,`translate(${o(c).x}px, ${o(c).y}px) scale(${s()})`)}),x(()=>(st(v()),o(y),o(w)),()=>{v()&&!o(y)?(_(y,!0),_(w,requestAnimationFrame(p))):(!v()||!o(y))&&(_(y,!1),cancelAnimationFrame(o(w)))}),Ae(),pe();var D=Oa(),P=Mt(D);Wt(P,t,"default",{},null),Ht(()=>X(D,"transform",o(a))),Nt("contextmenu",D,mo(Ye(function(E){ae.call(this,t,E)}))),Nt("click",D,mo(Ye(function(E){ae.call(this,t,E)}))),Nt("touchstart",D,mo(Ye(function(E){ae.call(this,t,E)}))),R(e,D),re(),r()}var Ba=Gt("<!> <!>",1);function Wa(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(h,"$activeGroup",n),s=()=>C(Ue,"$tracking",n),l=()=>C(v,"$cursor",n),c=()=>C(f,"$groups",n);console.log("Componente GraphRenderer.svelte");const a=Lt("graph"),u=Lt("snapTo");let d=g(t,"isMovable",8);const h=a.activeGroup,f=a.groups,m=a.initialNodePositions,v=a.cursor;function w(y){K(Ue,!0);const{groupName:p}=y.detail;K(h,p),K(Re,l()),K(m,us(c()[p].nodes))}x(()=>(i(),s(),gi),()=>{i()&&s()&&gi(a,u)}),Ae(),pe(),za(e,{get isMovable(){return d()},children:(y,p)=>{var D=Ba(),P=ct(D);Wt(P,t,"default",{},null);var E=tt(P,2);ba(E,{$$events:{groupClick:w}}),R(y,D)},$$slots:{default:!0}}),re(),r()}const Ga=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],Ya=new Set(Ga),pi=e=>Ya.has(e);var Xa=Gt('<input type="text">');function Fa(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(l,"$textStore",n);let s=g(t,"placeholder",8);const l=Lt("textStore");pe();var c=Xa();Ht(()=>W(c,"placeholder",s())),Nt("keydown",c,un(function(a){ae.call(this,t,a)})),Nt("click",c,un(function(a){ae.call(this,t,a)})),Nt("mousedown",c,un(function(a){ae.call(this,t,a)})),Pl(c,i,a=>K(l,a)),R(e,c),re(),r()}const qa=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);var ja=Gt("<div><!></div>"),Ha=Gt('<div role="button"><!> <div class="anchors left svelte-1iknrz0"><!></div> <div class="anchors right svelte-1iknrz0"><!></div> <div class="anchors top svelte-1iknrz0"><!></div> <div class="anchors bottom svelte-1iknrz0"><!></div></div>');function Ka(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(ht(),"$groups",n),s=()=>C(Kt,"$position",n),l=()=>C(De,"$selectedNodes",n),c=()=>C(Oe,"$hiddenNodes",n),a=()=>C(be,"$resized",n),u=()=>C(T,"$duplicate",n),d=()=>C(H(),"$centerPoint",n),h=()=>C(ge,"$widthStore",n),f=()=>C(ue,"$heightStore",n),m=()=>C(Re,"$initialClickPosition",n),v=()=>C(ot,"$graphDOMElement",n),w=()=>C(St,"$zIndex",n),y=()=>C(B(),"$maxZIndex",n),p=()=>C(Yt(),"$locked",n),D=()=>C(rt,"$nodeLock",n),P=()=>C(Q,"$editable",n),E=()=>C(Jt,"$group",n),L=()=>C(Me,"$rotation",n),G=()=>C(Xt,"$bgColor",n),V=()=>C(Ft,"$textColor",n),z=()=>C(Ce,"$borderColor",n),Z=()=>C(J,"$selectionColor",n),j=()=>C($t,"$borderRadius",n),mt=()=>C(at,"$borderWidth",n),gt=b(),et=b(),q=b(),nt=b(),F=Lt("mounted"),T=Lt("duplicate"),ot=Lt("graphDOMElement"),dt=eo();let I=g(t,"node",8),At=g(t,"isDefault",8),vt=g(t,"useDefaults",8),A=g(t,"center",8),It=g(t,"nodeStore",8),Yt=g(t,"locked",8),ht=g(t,"groups",8),B=g(t,"maxZIndex",8),H=g(t,"centerPoint",8),zt=g(t,"cursor",8),ut=g(t,"initialNodePositions",8),Y=g(t,"activeGroup",8),bt=g(t,"editing",8),xt=g(t,"dimensionsProvided",8,!1),_t=g(t,"title",8);const pt=S(0),yt=S(null),ft=I().id,Kt=I().position,ge=I().dimensions.width,ue=I().dimensions.height,J=I().selectionColor,Q=I().editable,rt=I().locked,St=I().zIndex,Xt=I().bgColor,$t=I().borderRadius,Ft=I().textColor,Jt=I().group,Ce=I().borderColor,at=I().borderWidth,Me=I().rotation,{selected:Pe,hidden:ye}=i(),Oe=ye.nodes,De=Pe.nodes,be=S(!1);jt("node",I()),jt("anchorsMounted",pt),jt("resized",be),jt("nodeConnectEvent",yt),nn(()=>{if(A()){const Tt={x:d().x-h()/2,y:d().y-f()/2};I().position.set(Tt),Ue.set(!0),Ue.set(!1)}F.update(Tt=>Tt+1)}),sr(()=>{o(et)&&(l().delete(I()),K(De,l())),F.update(Tt=>Tt-1)});function on(){o(et)?(I()&&l().delete(I()),K(De,l())):(I()&&l().add(I()),K(De,l()))}function qt(Tt){K(Re,k(zt())),v().focus(),w()!==y()&&w()!==1/0&&K(St,Ll(B(),y()));const Rt=Tt.target;if(!qa.has(Rt.tagName)&&(Tt.preventDefault(),dt("nodeClicked",{node:I(),e:Tt}),!(p()||D()))){if("touches"in Tt){if(Tt.touches&&Tt.touches.length>1)return}else Tt.button===2&&P()&&K(bt(),I());K(Ue,!0),Qt(Tt)}}function Qt(Tt){let Rt,Ie,Ee=!1;const de=E();de&&(Rt=i()[de],Ie=k(Rt.parent),Ee=Ie===I()),Ee?K(Y(),de):K(Y(),"selected"),!Tt.shiftKey&&o(et)?K(Y(),"selected"):(!Tt.shiftKey&&!o(et)&&!Tt.shiftKey&&(l().clear(),K(De,l())),on()),K(ut(),us(i().selected.nodes))}function rn(){It().delete(ft)}function $e(Tt){const Rt=k(zt()),Ie=Rt.x-m().x,Ee=Rt.y-m().y;Math.abs(Ie)+Math.abs(Ee)<4&&dt("nodeReleased",{e:Tt,node:I()}),K(yt,Tt)}function Xe(Tt){return Tt.addEventListener("mousedown",qt),Tt.addEventListener("touchstart",qt),{destroy(){Tt.removeEventListener("mousedown",qt),Tt.removeEventListener("touchstart",qt)}}}x(()=>s(),()=>{_(gt,s())}),x(()=>(l(),st(I())),()=>{_(et,l().has(I()))}),x(()=>(c(),st(I())),()=>{_(q,c().has(I()))}),x(()=>(st(xt()),a()),()=>{_(nt,xt()||a())}),x(()=>(o(et),u(),st(I())),()=>{o(et)&&u()&&dt("duplicate",I())}),Ae(),pe();var Ze=Pt(),En=ct(Ze);{var Rn=Tt=>{var Rt=Ha();W(Rt,"id",ft);let Ie;W(Rt,"tabindex",0);var Ee=Mt(Rt);{var de=U=>{var wt=ja();X(wt,"width","fit-content"),X(wt,"height","fit-content");var Bt=Mt(wt);Wt(Bt,t,"default",{grabHandle:Xe,get selected(){return o(et)},destroy:rn},null),ii(wt,"clientHeight",Vt=>K(ue,Vt)),ii(wt,"clientWidth",Vt=>K(ge,Vt)),R(U,wt)},Nn=U=>{var wt=Pt(),Bt=ct(wt);Wt(Bt,t,"default",{grabHandle:Xe,get selected(){return o(et)},destroy:rn},null),R(U,wt)};kt(Ee,U=>{o(nt)?U(Nn,!1):U(de)})}var gn=tt(Ee,2),_e=Mt(gn);Wt(_e,t,"anchorWest",{},null);var ze=tt(gn,2),Le=Mt(ze);Wt(Le,t,"anchorEast",{},null);var Be=tt(ze,2),N=Mt(Be);Wt(N,t,"anchorNorth",{},null);var $=tt(Be,2),it=Mt($);Wt(it,t,"anchorSouth",{},null),qn(()=>Nt("contextmenu",Rt,Ye(un(function(U){ae.call(this,t,U)})))),qn(()=>Nt("mouseup",Rt,$e)),Xn(Rt,U=>Xe==null?void 0:Xe(U)),Ht(()=>{Ie=me(Rt,1,"svelvet-node svelte-1iknrz0",null,Ie,{selected:o(et),locked:p()||D()}),W(Rt,"title",_t()),X(Rt,"top",`${o(gt).y??""}px`),X(Rt,"left",`${o(gt).x??""}px`),X(Rt,"z-index",w()),X(Rt,"width",o(nt)?h()+"px":"fit-content"),X(Rt,"height",o(nt)?f()+"px":"fit-content"),X(Rt,"transform",`rotate(${L()??""}deg)`),X(Rt,"--prop-background-color",G()||(At()||vt()?null:"transparent")),X(Rt,"--prop-text-color",V()),X(Rt,"--prop-border-color",z()),X(Rt,"--prop-selection-color",Z()),X(Rt,"--prop-border-radius",j()?`${j()}px`:At()||vt()?null:"0px"),X(Rt,"--prop-border-width",mt()||(At()||vt()?null:"0px")),W(gn,"id",`anchors-west-${I().id}`),W(ze,"id",`anchors-east-${I().id}`),W(Be,"id",`anchors-north-${I().id}`),W($,"id",`anchors-south-${I().id}`)}),R(Tt,Rt)};kt(En,Tt=>{o(q)||Tt(Rn)})}R(e,Ze),re(),r()}var Ua=Gt("<div></div> <div></div>",1),Va=Gt("<div></div> <div></div>",1),$a=Gt("<div></div>"),Za=Gt("<div></div>"),Ja=Gt("<!> <!> <!> <!>",1);function Qa(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(T,"$position",n),s=()=>C(A,"$widthStore",n),l=()=>C(vt,"$heightStore",n),c=()=>C(dt,"$resizingHeight",n),a=()=>C(It,"$cursor",n),u=()=>C(At,"$nodeRotation",n),d=()=>C(ot,"$resizingWidth",n),h=()=>C(I,"$rotating",n),f=()=>C(Re,"$initialClickPosition",n),m=b(),v=b(),w=b(),y=Lt("graph"),p=Lt("node"),D=Lt("resized");let P=g(t,"width",8,!1),E=g(t,"height",8,!1),L=g(t,"rotation",8,!1),G=g(t,"minHeight",12,0),V=g(t,"minWidth",12,0),z,Z=P(),j=P(),mt=E(),gt=E(),et=P()&&E(),q=0,nt=0,F=b(k(p.position));const T=p.position,ot=p.resizingWidth,dt=p.resizingHeight,I=p.rotating,At=p.rotation,vt=p.dimensions.height,A=p.dimensions.width,It=y.cursor;let Yt=b(),ht=b(),B=b(1);nn(()=>{try{z=document.querySelector(`#${p.id}`),z&&(J=>(V(J[0]),G(J[1])))(gr(z))}catch(J){console.error(J)}});function H(J,Q){const rt=Xt=>{Xt.stopPropagation(),Xt.preventDefault(),Q.left||Q.top?_(B,-1):_(B,1),Er.set(!0),K(Re,k(It)),_(Yt,s()),_(ht,l()),_(F,i()),Q.both?K(ot,!0):K(ot,!1),K(ot,Q.left||Q.right||Q.both||!1),K(dt,Q.top||Q.bottom||Q.both||!1),z&&($t=>(V($t[0]),G($t[1])))(gr(z)),window.addEventListener("mouseup",St)},St=()=>{K(ot,!1),K(dt,!1),Er.set(!1),window.removeEventListener("mouseup",St)};return J.addEventListener("mousedown",rt),{destroy(){J.removeEventListener("mousedown",rt)}}}function zt(J){const Q=St=>{St.stopPropagation(),St.preventDefault(),q=u(),K(Re,k(It));const Xt=f().x-o(w).x,$t=f().y-o(w).y;nt=Math.atan2($t,Xt),K(I,!0),window.addEventListener("mouseup",rt)},rt=()=>{K(I,!1),window.removeEventListener("mouseup",rt)};return J.addEventListener("mousedown",Q),{destroy(){J.removeEventListener("mousedown",Q)}}}function ut(){const J=k(It),Q=J.x-o(w).x,rt=J.y-o(w).y,St=Math.atan2(rt,Q),Xt=nt-St;return q-Y(Xt)}function Y(J){return J*(180/Math.PI)}Ol(()=>{z&&(J=>(V(J[0]),G(J[1])))(gr(z)),s()<V()&&D.set(!1),l()<G()&&D.set(!1)}),x(()=>(h(),a()),()=>{h()&&(a(),K(At,ut()))}),x(()=>(c(),a(),st(G()),o(ht),o(B),o(F),u()),()=>{if(c()){const J=k(Re),Q=a(),rt=Math.max(G(),o(ht)+(Q.y-J.y)*o(B));rt>G()?(D.set(!0),K(vt,rt)):D.set(!1),o(B)===-1&&K(T,{x:o(F).x,y:o(F).y+Q.y-J.y}),u()!==0&&p.position.update(St=>({y:o(F).y-(rt-o(ht))/2,x:St.x}))}}),x(()=>(d(),a(),st(V()),o(Yt),o(B),o(F),u()),()=>{if(d()){const J=k(Re),Q=a(),rt=Math.max(V(),o(Yt)+(Q.x-J.x)*o(B));rt>V()?(D.set(!0),K(A,rt)):D.set(!1),o(B)===-1&&K(T,{x:o(F).x+Q.x-J.x,y:o(F).y}),u()!==0&&p.position.update(St=>({x:o(F).x-(rt-o(Yt))/2,y:St.y}))}}),x(()=>i(),()=>{_(m,i().x)}),x(()=>i(),()=>{_(v,i().y)}),x(()=>(o(m),s(),o(v),l()),()=>{_(w,{x:o(m)+s()/2,y:o(v)+l()/2})}),Ae(),pe();var bt=Ja(),xt=ct(bt);{var _t=J=>{var Q=Ua(),rt=ct(Q);let St;Xn(rt,(Ft,Jt)=>H==null?void 0:H(Ft,Jt),()=>({left:Z}));var Xt=tt(rt,2);let $t;Xn(Xt,(Ft,Jt)=>H==null?void 0:H(Ft,Jt),()=>({right:j})),Ht(()=>{St=me(rt,1,"left svelte-1ryxg7v",null,St,{width:P()}),$t=me(Xt,1,"right svelte-1ryxg7v",null,$t,{width:P()})}),R(J,Q)};kt(xt,J=>{P()&&J(_t)})}var pt=tt(xt,2);{var yt=J=>{var Q=Va(),rt=ct(Q);let St;Xn(rt,(Ft,Jt)=>H==null?void 0:H(Ft,Jt),()=>({top:mt}));var Xt=tt(rt,2);let $t;Xn(Xt,(Ft,Jt)=>H==null?void 0:H(Ft,Jt),()=>({bottom:gt})),Ht(()=>{St=me(rt,1,"top svelte-1ryxg7v",null,St,{height:E()}),$t=me(Xt,1,"bottom svelte-1ryxg7v",null,$t,{height:E()})}),R(J,Q)};kt(pt,J=>{E()&&J(yt)})}var ft=tt(pt,2);{var Kt=J=>{var Q=$a();me(Q,1,"svelte-1ryxg7v",null,{},{both:et}),Xn(Q,(rt,St)=>H==null?void 0:H(rt,St),()=>({both:et})),R(J,Q)};kt(ft,J=>{et&&J(Kt)})}var ge=tt(ft,2);{var ue=J=>{var Q=Za();let rt;Xn(Q,St=>zt==null?void 0:zt(St)),Ht(()=>rt=me(Q,1,"svelte-1ryxg7v",null,rt,{rotation:L()})),R(J,Q)};kt(ge,J=>{L()&&J(ue)})}R(e,bt),re(),r()}var tc=Gt("<div></div>");function ec(e,t){let n=g(t,"output",8),r=g(t,"input",8),i=g(t,"connecting",8),s=g(t,"connected",8),l=g(t,"hovering",8),c=g(t,"bgColor",8);var a=tc();let u;Ht(()=>{u=me(a,1,"svelvet-anchor svelte-19t6skv",null,u,{output:n(),input:r(),connected:s(),connecting:i(),hovering:l()}),X(a,"--prop-anchor-color",c())}),R(e,a)}let mr;function nc(e){const t=e.parentNode;if(!t)return;t.removeChild(e);const n=document.querySelector(".svelvet-graph-wrapper");n&&n.appendChild(e)}var oc=hn('<defs><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="12.5" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 0, 15 5, 0 10"></polygon></marker><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="0" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 5, 15 0, 15 10"></polygon></marker></defs>'),rc=hn("<path></path>"),ic=Gt('<div class="default-label svelte-ppcocz"> </div>'),sc=hn('<foreignObject width="100%" height="100%" class="svelte-ppcocz"><span class="label-wrapper svelte-ppcocz"><!></span></foreignObject>'),lc=hn('<svg class="edges-wrapper svelte-ppcocz"><!><path role="presentation"></path><!><!></svg>');function mi(e,t){var sn,vn;const n=Wr(t);oe(t,!1);const[r,i]=xe(),s=()=>C(Tt,"$sourceDynamic",r),l=()=>C(Rt,"$targetDynamic",r),c=()=>C(o(V),"$edgeColor",r),a=()=>C(o(z),"$edgeLabel",r),u=()=>C(En,"$sourcePositionStore",r),d=()=>C(Rn,"$targetPositionStore",r),h=()=>C(de,"$sourceNodePositionStore",r),f=()=>C(Nn,"$targetNodePositionStore",r),m=()=>C(rn,"$sourceDirection",r),v=()=>C(Xe,"$sourceRotation",r),w=()=>C($e,"$targetDirection",r),y=()=>C(Ze,"$targetRotation",r),p=()=>C(gn,"$edgeType",r),D=()=>C(Ie,"$sourceMoving",r),P=()=>C(Ee,"$targetMoving",r),E=()=>C(o(xt),"$sourceZIndex",r),L=()=>C(o(_t),"$targetZIndex",r),G=b(),V=b(),z=b(),Z=b(),j=b(),mt=b(),gt=b(),et=b(),q=b(),nt=b(),F=b(),T=b(),ot=b(),dt=b(),I=b(),At=b(),vt=b(),A=b(),It=b(),Yt=b(),ht=b(),B=b(),H=b(),zt=b(),ut=b(),Y=b(),bt=b(),xt=b(),_t=b(),pt=b(),yt=b(),ft=Lt("edgeStore"),Kt=Lt("edgeStyle"),ge=Lt("endStyles"),ue=Lt("raiseEdgesOnSelect"),J=Lt("edgesAboveNode");let Q=g(t,"edge",24,()=>Lt("edge")),rt=g(t,"straight",8,Kt==="straight"),St=g(t,"step",8,Kt==="step"),Xt=g(t,"start",24,()=>ge[0]),$t=g(t,"end",24,()=>ge[1]),Ft=g(t,"animate",8,!1),Jt=g(t,"label",8,""),Ce=g(t,"enableHover",8,!1),at=g(t,"edgeClick",8,null),Me=g(t,"labelPosition",8,.5),Pe=g(t,"width",8,null),ye=g(t,"color",8,null),Oe=g(t,"labelColor",8,null),De=g(t,"textColor",8,null),be=g(t,"cornerRadius",8,8),on=g(t,"targetColor",8,null);const qt=Q().source,Qt=Q().target,rn=qt.direction,$e=Qt.direction,Xe=qt.rotation,Ze=Qt.rotation,En=qt.position,Rn=Qt.position,Tt=qt.dynamic,Rt=Qt.dynamic,Ie=qt.moving,Ee=Qt.moving,de=(sn=qt.node)==null?void 0:sn.position,Nn=(vn=Qt.node)==null?void 0:vn.position,gn=Q().type,_e=Q().id;let ze=b(),Le=b(),Be=b({x:0,y:0}),N=b(!1),$=b(!1),it=b(!1),U=b(!1),wt=b(!1),Bt=b();Q().rendered.set(!0),nn(()=>{setTimeout(()=>{o(Le)&&_(Be,vr(o(Le),Me()))},0),nc(o(Bt))}),rs(()=>{o(Le)&&_(Be,vr(o(Le),Me()))}),sr(()=>{o(Bt).remove(),cancelAnimationFrame(mr)});function Vt(){o(N)&&(o(Le)&&_(Be,vr(o(Le),Me())),mr=requestAnimationFrame(Vt))}function fe(){if(qt.id===null||Qt.id===null)return;const ve=ft.match(qt,Qt);ft.delete(ve[0]),qt==null||qt.connected.update(ne=>(Qt&&ne.delete(Qt),ne)),Qt==null||Qt.connected.update(ne=>(qt&&ne.delete(qt),ne))}x(()=>(s(),l()),()=>{_(G,s()||l())}),x(()=>{},()=>{yn(_(V,(qt==null?void 0:qt.edgeColor)||(Qt==null?void 0:Qt.edgeColor)||null),"$edgeColor",r)}),x(()=>st(Q()),()=>{var ve;yn(_(z,(ve=Q().label)==null?void 0:ve.text),"$edgeLabel",r)}),x(()=>(st(ye()),c()),()=>{_(Z,ye()||c()||null)}),x(()=>(st(Jt()),a()),()=>{_(j,Jt()||a()||"")}),x(()=>o(j),()=>{_(mt,o(j)||n.label)}),x(()=>u(),()=>{_(gt,u())}),x(()=>d(),()=>{_(et,d())}),x(()=>h(),()=>{_(q,h())}),x(()=>f(),()=>{_(nt,f())}),x(()=>o(gt),()=>{_(F,o(gt).x)}),x(()=>o(gt),()=>{_(T,o(gt).y)}),x(()=>o(et),()=>{_(ot,o(et).x)}),x(()=>o(et),()=>{_(dt,o(et).y)}),x(()=>(o(ot),o(F)),()=>{_(I,o(ot)-o(F))}),x(()=>(o(dt),o(T)),()=>{_(At,o(dt)-o(T))}),x(()=>o(I),()=>{_(vt,Math.abs(o(I)))}),x(()=>o(At),()=>{_(A,Math.abs(o(At)))}),x(()=>o(vt),()=>{_(It,Math.max(30,Math.min(600,o(vt)/2)))}),x(()=>o(A),()=>{_(Yt,Math.max(30,Math.min(600,o(A)/2)))}),x(()=>(o(G),o(nt),o(q),o(it),o(U),k),()=>{if(o(G)&&qt.node&&Qt.node){const ve=o(nt).x-o(q).x,ne=o(nt).y-o(q).y;_(it,ne>0),_(U,ve>0);let se,Fe;if(o(it)){const te=k(qt.node.dimensions.height),Ot=o(q).y+te;se=o(nt).y-Ot}else{const te=k(Qt.node.dimensions.height),Ot=o(nt).y+te;se=o(q).y-Ot}if(o(U)){const te=k(qt.node.dimensions.width),Ot=o(q).x+te;Fe=o(nt).x-Ot}else{const te=k(Qt.node.dimensions.width),Ot=o(nt).x+te;Fe=o(q).x-Ot}_($,se>Fe)}}),x(()=>(o(G),o($),o(it),o(U),s(),l()),()=>{if(o(G)){let ve,ne;o($)?(ve=o(it)?"south":"north",ne=o(it)?"north":"south"):(ve=o(U)?"east":"west",ne=o(U)?"west":"east"),s()&&K(rn,ve),l()&&K($e,ne)}}),x(()=>(m(),v()),()=>{_(ht,di(go[m()],v()||0))}),x(()=>(w(),y()),()=>{_(B,di(go[w()],y()||0))}),x(()=>(o(F),o(ht),o(It)),()=>{_(H,o(F)+o(ht).x*o(It))}),x(()=>(o(T),o(ht),o(Yt)),()=>{_(zt,o(T)+o(ht).y*o(Yt))}),x(()=>(o(ot),o(B),o(It)),()=>{_(ut,o(ot)+o(B).x*o(It))}),x(()=>(o(dt),o(B),o(Yt)),()=>{_(Y,o(dt)+o(B).y*o(Yt))}),x(()=>(o(H),o(zt),o(ut),o(Y)),()=>{_(bt,`C ${o(H)}, ${o(zt)} ${o(ut)}, ${o(Y)}`)}),x(()=>(st(St()),p(),o(F),o(T),st(rt()),o(bt),o(ot),o(dt)),()=>{(!St()||_e==="cursor"||p()==="bezier")&&_(ze,`M ${o(F)}, ${o(T)} ${rt()?"":o(bt)} ${o(ot)}, ${o(dt)}`)}),x(()=>(o(mt),o(N),D(),P()),()=>{o(mt)&&!o(N)&&(D()||P()||_e==="cursor")?(_(N,!0),Vt()):o(N)&&!D()&&!P()&&_e!=="cursor"&&(_(N,!1),cancelAnimationFrame(mr))}),x(()=>(st(St()),p(),o(F),o(T),m(),o(ot),o(dt),w(),st(be()),fi),()=>{if(St()&&_e!=="cursor"&&!(p()&&p()==="bezier")){const ve={x:o(F),y:o(T),direction:go[m()]},ne={x:o(ot),y:o(dt),direction:go[w()]},se=Ca(ve,ne,ca),Fe=(te,Ot,ln)=>{if(Ot<se.length-1){const Bn=Vl(te,se[Ot+1]);return $l(ln,Bn)}return""};_(ze,se.reduce((te,Ot,ln)=>{const Bn=Math.sign(Ot.x),M=Math.sign(Ot.y);let O=Ot.x,lt=Ot.y,Ct="";if(be()){const Et=se[ln+1]||{x:0,y:0},Ut=se[ln-1]||{x:0,y:0},le=Lo(Ot.x,Et.x,be()),We=Lo(Et.y,Ot.y,be()),qe=Lo(Ut.x,Ot.x,be()),An=Lo(Ut.y,Ot.y,be()),Je=Math.min(qe,An),je=Math.min(le,We);Ot.x?O=Ot.x-(je+Je)*Bn:lt=Ot.y-(je+Je)*M,Ct=Fe(Ot,ln,je)}return fi(te,O,lt,Ct)},`M ${o(F)}, ${o(T)}`))}}),x(()=>{},()=>{yn(_(xt,qt.node.zIndex||0),"$sourceZIndex",r)}),x(()=>{},()=>{yn(_(_t,Qt.node.zIndex||0),"$targetZIndex",r)}),x(()=>(E(),L()),()=>{_(pt,Math.max(E(),L()))}),x(()=>(o(pt),E(),L()),()=>{_(yt,J==="all"?1e5:J?o(pt):ue===!0?o(pt)-1:ue==="source"?E()-1:ue==="target"?L()-1:0)}),Ae(),pe();var he=Pt(),we=ct(he);{var On=ve=>{var ne=lc(),se=Mt(ne);{var Fe=O=>{var lt=oc(),Ct=Mt(lt);W(Ct,"id",_e+"-end-arrow");var Et=Mt(Ct),Ut=tt(Ct);W(Ut,"id",_e+"-start-arrow");var le=Mt(Ut);Ht(()=>{X(Et,"--prop-edge-color",o(Z)),X(le,"--prop-edge-color",o(Z))}),R(O,lt)};kt(se,O=>{(Xt()||$t())&&O(Fe)})}var te=tt(se);W(te,"id",_e+"-target");let Ot;to(te,O=>_(Le,O),()=>o(Le));var ln=tt(te);Wt(ln,t,"default",{get path(){return o(ze)},destroy:fe,get hovering(){return o(wt)}},O=>{var lt=rc();W(lt,"id",_e);let Ct;Ht(()=>{Ct=me(lt,0,"edge svelte-ppcocz",null,Ct,{animate:Ft()}),W(lt,"d",o(ze)),W(lt,"marker-end",$t()==="arrow"?`url(#${_e+"-end-arrow"})`:""),W(lt,"marker-start",Xt()==="arrow"?`url(#${_e+"-start-arrow"})`:""),X(lt,"--prop-edge-color",o(Z)),X(lt,"--prop-stroke-width",Pe()?Pe()+"px":null)}),R(O,lt)});var Bn=tt(ln);{var M=O=>{var lt=sc(),Ct=Mt(lt),Et=Mt(Ct);Wt(Et,t,"label",{destroy:fe,get hovering(){return o(wt)}},Ut=>{var le=ic(),We=Mt(le);Ht(()=>{X(le,"--prop-label-color",Oe()),X(le,"--prop-label-text-color",De()),ns(We,o(j))}),R(Ut,le)}),Ht(()=>{W(lt,"x",o(Be).x),W(lt,"y",o(Be).y)}),R(O,lt)};kt(Bn,O=>{o(mt)&&O(M)})}to(ne,O=>_(Bt,O),()=>o(Bt)),Ht(()=>{X(ne,"z-index",o(yt)),Ot=me(te,0,"target svelte-ppcocz",null,Ot,{cursor:_e==="cursor"||!at()&&!Ce()}),W(te,"d",o(ze)),X(te,"cursor",at()||o(wt)?"pointer":"move"),X(te,"--prop-target-edge-color",at()||o(wt)?on()||null:"transparent")}),Nt("mousedown",te,function(...O){var lt;(lt=at())==null||lt.apply(this,O)}),Nt("mouseenter",te,()=>_(wt,!0)),Nt("mouseleave",te,()=>_(wt,!1)),R(ve,ne)};kt(we,ve=>{qt&&Qt&&ve(On)})}R(e,he),Gr(t,"destroy",fe);var zn=re({destroy:fe});return i(),zn}function _i(e,t){oe(t,!1);let n=g(t,"edge",8);jt("edge",n()),pe();var r=Pt(),i=ct(r);Wt(i,t,"default",{},null),R(e,r),re()}let _r;const an=S(null);function ac(e,t,n){if(t==="self")return;const r=e.parentNode;if(!r)return;r.removeChild(e);const i=document.querySelector(`#anchors-${t}-${n.id}`);i&&(i.appendChild(e),e&&n.recalculateAnchors())}var cc=Gt('<div role="button" tabindex="0"><!></div> <!> <!>',1);function vo(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(an,"$connectingFrom",n),s=()=>C(Jt,"$nodeLevelConnections",n),l=()=>C(et,"$anchorsMounted",n),c=()=>C(o(D),"$dynamicDirection",n),a=()=>C(z,"$mounted",n),u=()=>C(gt,"$nodeConnectEvent",n),d=()=>C(St,"$anchors",n),h=()=>C(o(p),"$connectedAnchors",n),f=()=>C(Xt,"$resizingWidth",n),m=()=>C($t,"$resizingHeight",n),v=()=>C(Ft,"$rotating",n),w=()=>C(vt(),"$inputsStore",n),y=b(),p=b(),D=b(),P=Lt("dynamic"),E=Lt("node"),L=Lt("edgeStore"),G=Lt("cursorAnchor"),V=Lt("direction"),z=Lt("mounted"),Z=Lt("graph"),j=Lt("nodeStore"),mt=Lt("graphEdge"),gt=Lt("nodeConnectEvent"),et=Lt("anchorsMounted"),q=Lt("flowchart")||void 0;let nt=g(t,"bgColor",8,null),F=g(t,"id",8,0),T=g(t,"input",8,!1),ot=g(t,"output",8,!1),dt=g(t,"multiple",24,()=>ot()?!0:!T()),I=g(t,"dynamic",8,P||!1),At=g(t,"edge",8,null),vt=g(t,"inputsStore",8,null),A=g(t,"key",8,null),It=g(t,"outputStore",8,null),Yt=g(t,"connections",28,()=>[]),ht=g(t,"edgeColor",24,()=>S(null)),B=g(t,"edgeLabel",8,""),H=g(t,"locked",8,!1),zt=g(t,"nodeConnect",8,!1),ut=g(t,"edgeStyle",8,null),Y=g(t,"endStyles",24,()=>[null,null]),bt=g(t,"invisible",8,!1),xt=g(t,"direction",24,()=>V==="TD"?T()?"north":"south":T()?"west":"east"),_t=g(t,"title",8,"");const pt=eo(),yt=eo();let ft=b(),Kt=b(!1),ge=b(!1),ue=b(0),J=T()===ot()?null:T()?"input":"output",Q=b([]);const rt=E.edge,St=E.anchors,Xt=E.resizingWidth,$t=E.resizingHeight,Ft=E.rotating,Jt=E.connections,Ce=`A-${F()||St.count()+1}/${E.id}`,at=Ta(Z,E,Ce,{x:0,y:0},{width:0,height:0},vt()||It()||null,At()||rt||mt||null,J,xt(),I(),A(),ht());St.add(at,at.id),nn(()=>{var $;o(ft)&&at.recalculatePosition();const N=Array.from(k(E.anchors)).reduce((it,[,U])=>(U.type==="output"&&it++,it),0);if(($=s())!=null&&$.length&&!T()){const it=[];let U=null;s().forEach((wt,Bt)=>{wt&&(U===null&&(U=Bt),(Bt-U)%N===0?(o(Q).push(wt),it.push(null)):it.push(wt))}),K(Jt,it)}Il(et,l())}),rs(()=>{o(ft)&&at.recalculatePosition()}),sr(()=>{Ze(),cancelAnimationFrame(_r)});function Me(N){var fe;L.delete("cursor");const $={x:N.changedTouches[0].clientX,y:N.changedTouches[0].clientY},it=document.elementFromPoint($.x,$.y);if(!it)return;const U=it.parentElement;if(!U)return;const wt=U.id,Bt=wt.split("/")[1],Vt=(fe=j.get(Bt))==null?void 0:fe.anchors.get(wt);Vt&&(L.delete("cursor"),Pe(at,Vt,N))}function Pe(N,$,it){const U=qt(N,$);U&&Qt(),it.shiftKey||$e(U)}function ye(N){var $;if("changedTouches"in N&&o(y)){Me(N);return}if(!o(y)){if(($=h())!=null&&$.size&&!dt()){L.delete("cursor"),N.shiftKey||$e(!1);return}i()&&on(N)}}function Oe(N){var $;if(!H()){if(($=h())!=null&&$.size&&!dt()&&!i())return En();if(!i())return De();on(N)}}function De(){T()===ot()?(K(an,{anchor:at,store:null,key:null}),be(at,G)):T()?(K(an,{anchor:at,store:vt(),key:A()}),be(G,at)):ot()&&(K(an,{anchor:at,store:It(),key:null}),be(at,G))}function be(N,$,it=!1){const U={color:ht(),label:{text:B()}};it&&(U.disconnect=!0),ut()&&(U.type=ut()),Y()[0]&&(U.start=Y()[0]),Y()[1]&&(U.start=Y()[1]);const wt=hi({source:N,target:$},(N==null?void 0:N.edge)||null,U);L.add(wt,"cursor")}function on(N){if(L.delete("cursor"),!i())return;const $=i().anchor.type;if(i().anchor===at||$===at.type&&$){$e(!1);return}at.recalculatePosition();let it,U;T()===ot()?$==="input"?(it=at,U=i().anchor):(it=i().anchor,U=at):T()?(it=i().anchor,U=at):(it=at,U=i().anchor),Pe(it,U,N)}function qt(N,$){if(N===$||k(N.connected).has(at))return!1;const it={color:ht(),label:{text:B()}};if(q){const wt=N.node.id.slice(2),Bt=q.nodeList[wt];if(Bt){const Vt=$.node.id.slice(2),fe=Bt.children.filter(he=>he.node.id===Vt)[0];if(fe){const he=fe;it.label={text:he.content}}}}ut()&&(it.type=ut()),Y()[0]&&(it.start=Y()[0]),Y()[1]&&(it.start=Y()[1]);const U=hi({source:N,target:$},(N==null?void 0:N.edge)||null,it);return!N.node||!$.node?!1:(L.add(U,new Set([N,$,N.node,$.node])),!0)}function Qt(){if(T()&&i()&&i().store)w()&&A()&&vt()&&typeof vt().set=="function"&&typeof vt().update=="function"&&yo(vt(),ce(w)[A()]=i().store,ce(w));else if(ot()&&i()&&i().store){const{store:N,key:$}=i();N&&$&&typeof N.update=="function"&&N.update(it=>(It()&&(it[$]=It()),it))}}function rn(){w()&&A()&&w()[A()]&&yo(vt(),ce(w)[A()]=S(k(w()[A()])),ce(w))}function $e(N){(N||!u())&&(K(an,null),K(gt,null))}function Xe(){o(Kt)&&(o(ft)&&at.recalculatePosition(),_r=requestAnimationFrame(Xe))}function Ze(){L.delete("cursor"),L.match(at).forEach($=>L.delete($)),$e(!1),rn()}function En(){if(k(at.connected).size>1)return;const N=Array.from(k(at.connected))[0];if(N.type!=="input")if(Ze(),N.type==="output"){be(N,G,!0),rn();const $=N.store;K(an,{anchor:N,store:$,key:null})}else be(N,G,!0),K(an,{anchor:N,store:null,key:null})}function Rn(){o(Q).forEach((N,$)=>{if(!N)return;Ie(N)&&Yt(Yt()[$]=null,!0)}),_(Q,o(Q).filter(N=>N!==null))}function Tt(){Yt().forEach(N=>{N&&Ie(N)})}function Rt(N){const $=`N-${N[0]}`,it=j.get($);if(!it)return;const U=it.anchors.get(`A-${N[1]}/N-${N[0]}`);if(!U)return;const wt=L.match(at,U);wt&&L.delete(wt[0])}const Ie=N=>{let $,it,U=null;Array.isArray(N)?($=N[0].toString(),it=N[1].toString()):($=N.toString(),it=null);const wt=`N-${$}`,Bt=j.get(wt);if(!Bt)return!1;if(it){const Vt=`A-${it}/${wt}`;U=Bt.anchors.get(Vt)||null}else{const Vt=k(Bt.anchors),fe=Array.from(Vt.values());if(!fe.length)return!1;U=fe.reduce((he,we)=>!he&&we.type==="output"?null:we.type==="output"?he:!he||k(we.connected).size<k(he.connected).size?we:he,null)}if(!U)return!1;if(qt(at,U),U.store&&(vt()||It())){if(T()&&U.type==="output")w()&&A()&&vt()&&typeof vt().set=="function"&&typeof vt().update=="function"&&yo(vt(),ce(w)[A()]=U.store,ce(w));else if(ot()&&U.type==="input"){const{store:Vt,inputKey:fe}=U;Vt&&fe&&typeof Vt.update=="function"&&Vt.update(he=>(It()&&(he[fe]=It()),he))}}return!0};x(()=>i(),()=>{var N;_(y,((N=i())==null?void 0:N.anchor)===at)}),x(()=>{},()=>{yn(_(p,at&&at.connected),"$connectedAnchors",n)}),x(()=>{},()=>{yn(_(D,at==null?void 0:at.direction),"$dynamicDirection",n)}),x(()=>(st(I()),o(ft),c()),()=>{I()&&o(ft)&&ac(o(ft),c(),E)}),x(()=>(a(),st(Yt())),()=>{a()===j.count()&&Yt().length&&Tt()}),x(()=>(st(zt()),u()),()=>{zt()&&u()&&ye(u())}),x(()=>(a(),o(Q)),()=>{a()===j.count()&&o(Q).length&&Rn()}),x(()=>(o(ft),d(),h(),c()),()=>{o(ft)&&(d(),h(),c(),at.recalculatePosition())}),x(()=>(o(Kt),f(),m(),v()),()=>{!o(Kt)&&(f()||m()||v())?(_(Kt,!0),Xe()):!f()&&!m()&&o(Kt)&&!v()&&(_(Kt,!1),cancelAnimationFrame(_r))}),x(()=>(h(),o(ue)),()=>{if(h()){if(h().size<o(ue))yt("disconnection",{node:E,anchor:at});else if(h().size>o(ue)){const N=Array.from(h()),$=N[N.length-1];pt("connection",{node:E,anchor:at,connectedNode:$.node,connectedAnchor:$})}_(ue,h().size)}}),Ae(),pe();var Ee=cc(),de=ct(Ee);let Nn;var gn=Mt(de);Wt(gn,t,"default",{get linked(){var N;return((N=h())==null?void 0:N.size)>=1},get hovering(){return o(ge)},get connecting(){return o(y)}},N=>{var $=Pt(),it=ct($);{var U=wt=>{const Bt=Te(()=>{var Vt;return((Vt=h())==null?void 0:Vt.size)>=1});ec(wt,{get output(){return ot()},get input(){return T()},get connecting(){return o(y)},get hovering(){return o(ge)},get bgColor(){return nt()},get connected(){return o(Bt)}})};kt(it,wt=>{bt()||wt(U)})}R(N,$)}),to(de,N=>_(ft,N),()=>o(ft));var _e=tt(de,2);cn(_e,1,()=>Array.from(h()),N=>N.id,(N,$,it,U)=>{var wt=Pt();const Bt=Te(()=>L.fetch(at,o($)));var Vt=ct(wt);{var fe=he=>{const we=Te(()=>o(Bt).component);_i(he,{get edge(){return o(Bt)},children:(On,zn)=>{var sn=Pt(),vn=ct(sn);Wt(vn,t,"edge",{},ve=>{var ne=Pt(),se=ct(ne);{var Fe=Ot=>{o(we)(Ot,{})},te=Ot=>{mi(Ot,{})};kt(se,Ot=>{o(we)?Ot(Fe):Ot(te,!1)})}R(ve,ne)}),R(On,sn)},$$slots:{default:!0}})};kt(Vt,he=>{o(Bt)&&o(Bt).source===at&&he(fe)})}R(N,wt)});var ze=tt(_e,2);{var Le=N=>{var $=Pt();const it=Te(()=>L.get("cursor"));var U=ct($);{var wt=Bt=>{const Vt=Te(()=>o(it).component);_i(Bt,{get edge(){return o(it)},children:(fe,he)=>{var we=Pt(),On=ct(we);Wt(On,t,"edge",{},zn=>{var sn=Pt(),vn=ct(sn);{var ve=se=>{o(Vt)(se,{})},ne=se=>{mi(se,{})};kt(vn,se=>{o(Vt)?se(ve):se(ne,!1)})}R(zn,sn)}),R(fe,we)},$$slots:{default:!0}})};kt(U,Bt=>{o(it)&&Bt(wt)})}R(N,$)};kt(ze,N=>{o(y)&&N(Le)})}Ht(()=>{W(de,"id",at==null?void 0:at.id),Nn=me(de,1,"anchor-wrapper svelte-bazd6o",null,Nn,{locked:H()}),W(de,"title",_t()||"")}),Nt("mouseenter",de,()=>_(ge,!0)),Nt("mouseleave",de,()=>_(ge,!1)),Nt("mousedown",de,Ye(un(Oe))),Nt("mouseup",de,un(ye)),Nt("touchstart",de,Ye(un(Oe))),Nt("touchend",de,un(ye)),R(e,Ee),Gr(t,"disconnect",Rt);var Be=re({disconnect:Rt});return r(),Be}var uc=Gt("<!> <!>",1),dc=Gt("<div></div> <div></div>",1),fc=Gt('<div><!> <p class="svelte-j5bq7k"> </p> <!></div>');function hc(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(v,"$borderRadius",n),s=()=>C(y,"$inputs",n),l=()=>C(p,"$outputs",n),c=()=>C(w,"$textColor",n),a=()=>C(m,"$label",n),u=()=>C(D,"$resizable",n),d=Lt("dynamic"),h=Lt("node");let f=g(t,"selected",8);const m=h.label,v=h.borderRadius,w=h.textColor,y=h.inputs,p=h.outputs,D=h.resizable,P=k(h.direction);let E=P==="TD",L=P==="TD",G=P!=="TD",V=P!=="TD";pe();var z=fc();let Z;var j=Mt(z);{var mt=T=>{var ot=uc(),dt=ct(ot);cn(dt,1,()=>({length:s()}),Zn,(At,vt)=>{vo(At,{$$events:{connection(A){ae.call(this,t,A)},disconnection(A){ae.call(this,t,A)}}})});var I=tt(dt,2);cn(I,1,()=>({length:l()}),Zn,(At,vt)=>{vo(At,{$$events:{connection(A){ae.call(this,t,A)},disconnection(A){ae.call(this,t,A)}}})}),R(T,ot)},gt=T=>{var ot=dc(),dt=ct(ot);me(dt,1,"input-anchors svelte-j5bq7k",null,{},{top:E,left:G}),cn(dt,5,()=>({length:s()}),Zn,(At,vt)=>{vo(At,{input:!0,direction:E?"north":"west",$$events:{connection(A){ae.call(this,t,A)},disconnection(A){ae.call(this,t,A)}}})});var I=tt(dt,2);me(I,1,"output-anchors svelte-j5bq7k",null,{},{bottom:L,right:V}),cn(I,5,()=>({length:l()}),Zn,(At,vt)=>{vo(At,{output:!0,direction:E?"south":"east",$$events:{connection(A){ae.call(this,t,A)},disconnection(A){ae.call(this,t,A)}}})}),R(T,ot)};kt(j,T=>{d?T(mt):T(gt,!1)})}var et=tt(j,2),q=Mt(et),nt=tt(et,2);{var F=T=>{Qa(T,{width:!0,height:!0,rotation:!0})};kt(nt,T=>{u()&&T(F)})}Ht(()=>{Z=me(z,1,"default-node svelte-j5bq7k",null,Z,{selected:f()}),X(z,"border-radius",`${i()??""}px`),X(et,"color",c()),ns(q,a())}),R(e,z),re(),r()}function qr(e,t){const n=Wr(t);oe(t,!1);const[r,i]=xe(),s=()=>C(o(c),"$nodePosition",r),l=()=>C(vt,"$nodes",r),c=b(),a=Lt("graph"),u=Lt("group");let d=g(t,"position",28,()=>({x:0,y:0})),h=g(t,"drop",8,!1),f=g(t,"dimensions",8,null),m=g(t,"id",8,0),v=g(t,"bgColor",8,null),w=g(t,"borderRadius",8,null),y=g(t,"borderColor",8,null),p=g(t,"borderWidth",8,null),D=g(t,"selectionColor",8,null),P=g(t,"textColor",8,null),E=g(t,"resizable",8,!1),L=g(t,"label",8,""),G=g(t,"inputs",8,1),V=g(t,"outputs",8,1),z=g(t,"width",8,null),Z=g(t,"height",8,null),j=g(t,"TD",8,!1),mt=g(t,"LR",8,!1),gt=g(t,"zIndex",8,1),et=g(t,"editable",8,!0),q=g(t,"locked",8,!1),nt=g(t,"rotation",8,0),F=g(t,"edge",8,null),T=g(t,"connections",24,()=>[]),ot=g(t,"useDefaults",8,!1),dt=g(t,"center",8,!1),I=g(t,"dynamic",8,!1),At=g(t,"title",8,"");const vt=a.nodes;jt("dynamic",I());let A=b(),It=b(!0);nn(()=>{const Y=j()?"TD":mt()?"LR":a.direction,bt=a.groupBoxes.get(u),xt=a.nodes.count()+1;_(It,!n.default),(n.anchorWest||n.anchorEast||n.anchorNorth||n.anchorSouth)&&_(It,!1);const _t=f()?f():z()||Z()?{width:z()||Z()||200,height:Z()||z()||100}:o(It)?{width:200,height:100}:{width:0,height:0},pt={id:m()||xt,position:h()==="cursor"?{x:k(a.cursor).x,y:k(a.cursor).y}:bt?{x:k(bt.position).x+d().x,y:k(bt.position).y+d().y}:d(),dimensions:_t,editable:et()||a.editable,label:L(),group:u,resizable:E(),inputs:G(),outputs:V(),zIndex:gt(),direction:Y,locked:q(),rotation:nt()};T().length&&(pt.connections=T()),p()&&(pt.borderWidth=p()),w()&&(pt.borderRadius=w()),y()&&(pt.borderColor=y()),D()&&(pt.selectionColor=D()),P()&&(pt.textColor=P()),v()&&(pt.bgColor=v()),F()&&(pt.edge=F()),_(A,Ma(pt)),bt&&a.groups.update(yt=>{const ft=k(yt[u].nodes);return yt[u].nodes.set(new Set([...ft,o(A)])),yt}),a.nodes.add(o(A),o(A).id)}),sr(()=>{a.nodes.delete(o(A).id)});function Yt(Y){o(A)&&o(A).connections.set([Y])}function ht(Y){if(!o(A))return;(Array.isArray(Y)?Y:[Y]).forEach(xt=>{const[_t,pt]=Array.isArray(xt)?xt:[xt,null],yt=`N-${_t}`,ft=a.nodes.get(yt);if(!ft)return;let Kt=null;const ge=pt?`A-${pt}/${yt}`:null;ge&&(Kt=ft.anchors.get(ge));const ue=a.edges.match(o(A),ft,Kt);ue.length&&a.edges.delete(ue[ue.length-1])})}jt("connect",Yt),jt("disconnect",ht);let B=b(d());x(()=>(o(A),st(T())),()=>{o(A)&&o(A).connections.set(T())}),x(()=>(o(A),st(v())),()=>{o(A)&&o(A).bgColor.set(v())}),x(()=>(o(A),st(L())),()=>{o(A)&&o(A).label.set(L())}),x(()=>(o(A),st(P())),()=>{o(A)&&o(A).textColor.set(P())}),x(()=>(o(A),st(y())),()=>{o(A)&&o(A).borderColor.set(y())}),x(()=>(o(A),st(D())),()=>{o(A)&&o(A).selectionColor.set(D())}),x(()=>(o(A),st(E())),()=>{o(A)&&o(A).resizable.set(E())}),x(()=>(o(A),st(et())),()=>{o(A)&&o(A).editable.set(et())}),x(()=>(o(A),st(q())),()=>{o(A)&&o(A).locked.set(q())}),x(()=>(o(A),st(G())),()=>{o(A)&&o(A).inputs.set(G())}),x(()=>(o(A),st(V())),()=>{o(A)&&o(A).outputs.set(V())}),x(()=>(o(A),st(gt())),()=>{o(A)&&o(A).zIndex.set(gt())}),x(()=>o(A),()=>{var Y;yn(_(c,o(A)&&((Y=o(A))==null?void 0:Y.position)),"$nodePosition",r)}),x(()=>(o(A),o(B),s(),st(d())),()=>{if(o(A)){const{x:Y,y:bt}=o(B),{x:xt,y:_t}=s(),{x:pt,y:yt}=d();(pt!==xt||yt!==_t)&&(pt!==Y||yt!==bt?(_(B,d()),o(A).position.set(d())):(_(B,s()),d(s())))}}),x(()=>(o(A),st(G())),()=>{o(A)&&o(A).inputs.set(G())}),x(()=>(o(A),st(V())),()=>{o(A)&&o(A).outputs.set(V())}),Ae(),pe();var H=Pt(),zt=ct(H);{var ut=Y=>{const bt=Te(()=>dt()||h()==="center"),xt=Te(()=>!!f()||!!z()||!!Z()||o(It)||!1);Ka(Y,{get node(){return o(A)},get center(){return o(bt)},get isDefault(){return o(It)},get useDefaults(){return ot()},get dimensionsProvided(){return o(xt)},get nodeStore(){return a.nodes},get locked(){return a.locked},get groups(){return a.groups},get title(){return At()},get maxZIndex(){return a.maxZIndex},get centerPoint(){return a.center},get cursor(){return a.cursor},get activeGroup(){return a.activeGroup},get editing(){return a.editing},get initialNodePositions(){return a.initialNodePositions},$$events:{nodeClicked(_t){ae.call(this,t,_t)},nodeMount(_t){ae.call(this,t,_t)},nodeReleased(_t){ae.call(this,t,_t)},duplicate(_t){ae.call(this,t,_t)}},children:Ti,$$slots:{default:(_t,pt)=>{const yt=Te(()=>pt.destroy),ft=Te(()=>pt.selected),Kt=Te(()=>pt.grabHandle);var ge=Pt(),ue=ct(ge);Wt(ue,t,"default",{get selected(){return o(ft)},get grabHandle(){return o(Kt)},disconnect:ht,connect:Yt,get node(){return o(A)},get destroy(){return o(yt)}},J=>{var Q=Pt(),rt=ct(Q);{var St=Xt=>{hc(Xt,{get selected(){return o(ft)},$$events:{connection($t){ae.call(this,t,$t)},disconnection($t){ae.call(this,t,$t)}}})};kt(rt,Xt=>{o(It)&&Xt(St)})}R(J,Q)}),R(_t,ge)},anchorWest:(_t,pt)=>{var yt=Pt(),ft=ct(yt);Wt(ft,t,"anchorWest",{},null),R(_t,yt)},anchorEast:(_t,pt)=>{var yt=Pt(),ft=ct(yt);Wt(ft,t,"anchorEast",{},null),R(_t,yt)},anchorNorth:(_t,pt)=>{var yt=Pt(),ft=ct(yt);Wt(ft,t,"anchorNorth",{},null),R(_t,yt)},anchorSouth:(_t,pt)=>{var yt=Pt(),ft=ct(yt);Wt(ft,t,"anchorSouth",{},null),R(_t,yt)}}})};kt(zt,Y=>{o(A)&&l().get(o(A).id)&&Y(ut)})}R(e,H),re(),i()}var gc=Gt('<div class="editor svelte-1nv0yho"><span style="color:white; font-size:45px">Editor</span> <button style="position:absolute; top:10px;right:10px;">X</button> <!> <button>Delete Node</button> <button>Resize Node</button></div>');function vc(e,t){oe(t,!1);const n=b();let r=g(t,"editing",8);const i=Lt("graph");jt("graph",i),jt("textStore",r().label),jt("colorStore",r().bgColor);let s=b({x:150,y:50});function l(u){u.preventDefault(),_(s,{x:u.clientX,y:u.clientY}),i.editing.set(r())}function c(){i.nodes.delete(r().id),i.editing.set(null)}function a(){const u=r().id,d=i.nodes.get(u);if(d){const h=d.dimensions.width,f=d.dimensions.height,m=prompt("Enter new width (for example:250):",h?h.toString():""),v=prompt("Enter new height (for example:200):",f?f.toString():"");if(m===null||v===null)return;d.dimensions.width.set(parseInt(m,10)||0),d.dimensions.height.set(parseInt(v,10)||0),d.resizingWidth.set(!0),d.resizingHeight.set(!0)}}x(()=>{},()=>{_(n,i.cursor)}),Ae(),pe(),qr(e,{zIndex:1/0,get position(){return o(s)},bgColor:"white",id:"editor",children:(u,d)=>{var h=gc(),f=tt(Mt(h),2),m=tt(f,2);Fa(m,{placeholder:"Node Label"});var v=tt(m,2),w=tt(v,2);Nt("click",f,()=>i.editing.set(null)),Nt("click",v,c),Nt("click",w,a),Nt("contextmenu",h,l),R(u,h)},$$slots:{default:!0}}),re()}var pc=Gt("<!> <!>",1),mc=Gt('<section role="presentation" class="svelvet-wrapper svelte-13nq7cv"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></section>');function _c(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(_t,"$groups",n),s=()=>C(bt,"$dimensionsStore",n),l=()=>C(ue,"$nodeBounds",n),c=()=>C(zt,"$graphDOMElement",n),a=()=>C(Re,"$initialClickPosition",n),u=()=>C(yt,"$selected",n),d=()=>C(ft,"$activeGroup",n),h=()=>C(an,"$connectingFrom",n),f=()=>C(Cr,"$touchDistance",n),m=()=>C(Y,"$scale",n),v=()=>C(xt,"$translation",n),w=()=>C(ge,"$editing",n),y=b();let p=g(t,"graph",8),D=g(t,"width",8),P=g(t,"height",8),E=g(t,"minimap",12,!1),L=g(t,"controls",12,!1),G=g(t,"toggle",8,!1),V=g(t,"fixedZoom",8,!1),z=g(t,"pannable",8,!0),Z=g(t,"disableSelection",8,!1),j=g(t,"ZOOM_INCREMENT",8,.1),mt=g(t,"PAN_INCREMENT",8,50),gt=g(t,"PAN_TIME",8,250),et=g(t,"MAX_SCALE",8,3),q=g(t,"MIN_SCALE",8,.2),nt=g(t,"selectionColor",8),F=g(t,"backgroundExists",8),T=g(t,"fitView",8,!1),ot=g(t,"trackpadPan",8),dt=g(t,"modifier",8),I=g(t,"theme",12,"light"),At=g(t,"title",8),vt=g(t,"drawer",12,!1),A=g(t,"contrast",8,!1);console.log("Initial Graph drawer prop:",vt());let It;const Yt=eo(),ht={},B=S(!1),H=S(0),zt=S(null),ut=p().cursor,Y=p().transforms.scale,bt=p().dimensions,xt=p().transforms.translation,_t=p().groups,pt=p().groupBoxes,yt=i().selected.nodes,ft=p().activeGroup,Kt=p().initialNodePositions,ge=p().editing,ue=p().bounds.nodeBounds;let J=0,Q=1,rt=b({x:0,y:0,top:0,left:0}),St=b(!1),Xt=b(!1),$t=b(!1),Ft=b(!1),Jt=!1,Ce=b(!1),at,Me=b(null),Pe=b(null),ye=b(null),Oe=b(null),De=b(null);const be={id:null,position:p().cursor,offset:S({x:0,y:0}),connected:S(new Set),dynamic:S(!1),edge:null,edgeColor:S(null),direction:S("self"),inputKey:null,type:"output",moving:Ko(!1),store:null,mounted:S(!0),rotation:Ko(0),node:{zIndex:S(1/0),rotating:S(!1),position:p().cursor,dimensions:{width:S(0),height:S(0)}}};jt("graphDOMElement",zt),jt("cursorAnchor",be),jt("duplicate",B),jt("graph",p()),jt("transforms",p().transforms),jt("dimensions",p().dimensions),jt("locked",p().locked),jt("groups",p().groups),jt("bounds",p().bounds),jt("edgeStore",p().edges),jt("nodeStore",p().nodes),jt("mounted",H),nn(()=>{console.log("Graph component mounted with drawer1:",vt()),Ze()});async function on(){await dl(),Ue.set(!0);const{x:M,y:O,scale:lt}=Aa(at,l());M!==null&&O!==null&&lt!==null&&(p().transforms.scale.set(lt),xt.set({x:M,y:O})),Ue.set(!1),_(Ce,!0)}async function qt(){_(Pe,(await fo(async()=>{const{default:M}=await Promise.resolve().then(()=>Bc);return{default:M}},void 0,import.meta.url)).default)}async function Qt(){_(Me,(await fo(async()=>{const{default:M}=await import("./ThemeToggle-w8oUip72.js");return{default:M}},[],import.meta.url)).default)}async function rn(){_(ye,(await fo(async()=>{const{default:M}=await import("./Controls-BKF99LzW.js");return{default:M}},__vite__mapDeps([0,1]),import.meta.url)).default)}async function $e(){_(Oe,(await fo(async()=>{const{default:M}=await import("./DrawerController-B5c1RmR_.js");return{default:M}},__vite__mapDeps([2,1,3]),import.meta.url)).default)}async function Xe(){_(De,(await fo(async()=>{const{default:M}=await import("./ContrastTheme-81b3OXby.js");return{default:M}},[],import.meta.url)).default)}function Ze(){if(!c())return;const M=c().getBoundingClientRect();at={top:M.top,left:M.left,bottom:M.bottom,right:M.right,width:M.width,height:M.height},p().dimensions.set(at),T()==="resize"&&on()}function En(M){var lt,Ct;if(o(Xt)){const Ut=`${Ul()}/${p().id}`,le=k(ut),We=le.x-a().x,qe=le.y-a().y,An=Math.min(a().y,a().y+qe),Je=Math.min(a().x,a().x+We),je={width:S(Math.abs(We)),height:S(Math.abs(qe))},lo=S({x:Je,y:An}),Wn={group:S(Ut),dimensions:je,position:lo,color:S(Yl()),moving:S(!1)};pt.add(Wn,Ut),Array.from(u()).forEach(Gn=>{Gn.group.set(Ut)}),_t.update(Gn=>{const ar={parent:S(Wn),nodes:S(new Set([...u(),Wn]))};return Gn[Ut]=ar,Gn}),K(yt,new Set),_(Xt,!1),_(St,!1)}d()&&Array.from(k(i()[d()].nodes)).forEach(Ut=>{const le=Bo(k(Ut.position).x,k(Ut.position).y);Ut.position.set(le),Ut.moving.set(!1)});const O=p().edges.get("cursor");O&&(p().edges.delete("cursor"),O.disconnect||Yt("edgeDrop",{cursor:k(ut),source:{node:(lt=h())==null?void 0:lt.anchor.node.id.slice(2),anchor:(Ct=h())==null?void 0:Ct.anchor.id.split("/")[0].slice(2)}})),K(ft,null),K(Re,{x:0,y:0}),K(Kt,[]),_(St,!1),_(Ft,!1),K(Ue,!1),M.shiftKey||an.set(null),Hn(rt,o(rt).y=0),Hn(rt,o(rt).x=0)}function Rn(M){if(!z()&&!(M.shiftKey||M.metaKey)||M.button===2)return;c()&&c().focus();const{clientX:O,clientY:lt}=M;if(K(Re,k(ut)),M.shiftKey||M.metaKey){M.preventDefault(),_(St,!0);const{top:Ct,left:Et}=o(y);Hn(rt,o(rt).y=lt-Ct),Hn(rt,o(rt).x=O-Et),Hn(rt,o(rt).top=Ct),Hn(rt,o(rt).left=Et),M.shiftKey&&M.metaKey?_(Xt,!0):_(Xt,!1),M.metaKey&&!M.shiftKey?_($t,!0):_($t,!1)}else _(Ft,!0),K(yt,new Set),K(yt,u())}function Tt(M){K(yt,new Set),K(yt,u()),K(Re,k(ut)),_(Ft,!0),M.touches.length===2&&(Ie(),J=f(),Q=m())}function Rt(){_(Ft,!1),Jt=!1}function Ie(){Jt||(Jt=!0,It=requestAnimationFrame(Ee))}function Ee(){if(!Jt){cancelAnimationFrame(It);return}const O=f()/J;K(Y,Q*O),It=requestAnimationFrame(Ee)}function de(M){const{key:O,code:lt}=M,Ct=M.target;if(!(Ct.tagName=="INPUT"||Ct.tagName=="TEXTAREA")){if(lt==="KeyA"&&M[`${dt()}Key`]){const Et=p().nodes.getAll().filter(Ut=>!k(Ut.locked));K(yt,new Set(Et))}else if(pi(O))Be(O,M);else if(O==="=")vi(-1,p().dimensions,p().transforms,j());else if(O==="-")vi(1,p().dimensions,p().transforms,j());else if(O==="0")on();else if(O==="Control")i().selected.nodes.set(new Set);else if(lt==="KeyD"&&M[`${dt()}Key`])B.set(!0),setTimeout(()=>{B.set(!1)},100);else if(O==="Tab"&&(M.altKey||M.ctrlKey))gn();else if(O==="l")I(I()==="light"?"dark":"light");else if(O==="d")vt(!vt());else if(O==="m")E(!E());else if(O==="c")L(!L());else if(O==="e"){const Et=Array.from(u())[0];p().editing.set(Et)}else return;M.preventDefault()}}function Nn(M){var qe;M.preventDefault();const O=(qe=c())==null?void 0:qe.getBoundingClientRect();if(!O)return;const lt=M.clientX-O.left,Ct=M.clientY-O.top,{x:Et,y:Ut}=Bo(lt,Ct);if(console.log(`Dropped Node at Snapped Position: (${Et}, ${Ut})`),!We)return;const le={id:`node-${Date.now()}`,rotation:S(0),position:S({x:Et,y:Ut}),moving:S(!1),label:S("New Node"),dimensions:{width:S(200),height:S(100)},inputs:S(2),outputs:S(2),anchors:S([]),group:S(null),collapsed:S(!1),resizingWidth:S(!1),resizingHeight:S(!1),rotating:S(!1),editable:S(!0),locked:S(!1),recalculateAnchors:An=>{},resizable:S(!0),zIndex:S(1),edge:null,direction:S("TD"),borderRadius:S(5),borderWidth:S(1),connections:S([]),bgColor:S("#007bff"),borderColor:S("#000"),selectionColor:S("#ff0000"),textColor:S("#fff")};let We=null;p().nodes.add(le,le.id),We=null}function gn(){const M=p().nodes.getAll(),O=M.findIndex(Ct=>u().has(Ct)),lt=O+1;u().delete(M[O]),u().add(M[lt])}function _e(M){const{key:O}=M;pi(O)?(clearInterval(ht[O]),delete ht[O]):O==="Shift"&&an.set(null)}function ze(M){if(V())return;const O=M.shiftKey?.15:1,{clientX:lt,clientY:Ct,deltaY:Et}=M,Ut=v(),le={x:lt,y:Ct};if((ot()||M.metaKey)&&Et%1===0){K(xt,{x:yo(xt,ce(v).x-=M.deltaX,ce(v)),y:yo(xt,ce(v).y-=M.deltaY,ce(v))});return}if(m()>=et()&&Et<0||m()<=q()&&Et>0)return;const We=Math.min(.009*O*Math.abs(Et),.08),qe=as(m(),Math.sign(Et),We),An=ls(m(),qe,Ut,le,at);Y.set(qe),xt.set(An)}function Le(M){M.preventDefault()}function Be(M,O){const lt=O.shiftKey?2:1,Ct=M==="ArrowLeft"||M==="ArrowUp"?1:-1,Et=M==="ArrowLeft"||M==="ArrowRight",Ut=Et?v().x:v().y,le=Ut+Ct*mt()*lt;if(!ht[M]){const We=performance.now();let qe=setInterval(()=>{const An=performance.now()-We;if(u().size===0){const Je=Ut+(le-Ut)*(An/gt());xt.set({x:Et?Je:v().x,y:Et?v().y:Je})}else{const Je={x:Et?-Ct*2:0,y:Et?0:-Ct*2};Array.from(u()).forEach(je=>{const lo=k(je.position);let Wn;const Gn=k(je.group),ar=k(p().groupBoxes);if(Gn&&(Wn=ar.get(Gn)),Wn){const Do=k(je.dimensions.width),cr=k(je.dimensions.height),vs=fs(Wn,Do,cr);ds(lo,Je,je.position,vs)}else{const Do={x:lo.x+Je.x,y:lo.y+Je.y},cr=Bo(Do.x,Do.y);je.position.set(cr)}})}},2);ht[M]=qe}}x(()=>s(),()=>{_(y,s())}),x(()=>st(I()),()=>{I()&&document.documentElement.setAttribute("svelvet-theme",I())}),x(()=>(o(Ce),st(T())),()=>{!o(Ce)&&T()&&on()}),x(()=>(st(G()),o(Me)),()=>{G()&&!o(Me)&&Qt()}),x(()=>(st(E()),o(Pe)),()=>{E()&&!o(Pe)&&qt()}),x(()=>(st(L()),o(ye)),()=>{L()&&!o(ye)&&rn()}),x(()=>(st(vt()),o(Oe)),()=>{vt()&&!o(Oe)&&$e()}),x(()=>(st(A()),o(De)),()=>{A()&&!o(De)&&Xe()}),x(()=>st(vt()),()=>{console.log("Reactive Graph drawer prop:",vt())}),Ae(),pe();var N=mc();Nt("touchend",$n,En),Nt("mouseup",$n,En),Nt("resize",$n,Ze),Nt("scroll",$n,Ze),W(N,"tabindex",0);var $=Mt(N);Wa($,{get isMovable(){return o(Ft)},children:(M,O)=>{var lt=pc(),Ct=ct(lt);{var Et=le=>{vc(le,{get editing(){return w()}})};kt(Ct,le=>{w()&&le(Et)})}var Ut=tt(Ct,2);Wt(Ut,t,"default",{},null),R(M,lt)},$$slots:{default:!0}});var it=tt($,2);{var U=M=>{var O=Pt(),lt=ct(O);Wt(lt,t,"background",{},null),R(M,O)},wt=M=>{ma(M,{})};kt(it,M=>{F()?M(U):M(wt,!1)})}var Bt=tt(it,2);{var Vt=M=>{var O=Pt(),lt=ct(O);uo(lt,()=>o(Pe),(Ct,Et)=>{Et(Ct,{})}),R(M,O)};kt(Bt,M=>{E()&&M(Vt)})}var fe=tt(Bt,2);{var he=M=>{var O=Pt(),lt=ct(O);uo(lt,()=>o(ye),(Ct,Et)=>{Et(Ct,{})}),R(M,O)};kt(fe,M=>{L()&&M(he)})}var we=tt(fe,2);{var On=M=>{var O=Pt(),lt=ct(O);uo(lt,()=>o(Me),(Ct,Et)=>{Et(Ct,{})}),R(M,O)};kt(we,M=>{G()&&M(On)})}var zn=tt(we,2);{var sn=M=>{var O=Pt(),lt=ct(O);uo(lt,()=>o(Oe),(Ct,Et)=>{Et(Ct,{})}),R(M,O)};kt(zn,M=>{vt()&&M(sn)})}var vn=tt(zn,2);{var ve=M=>{var O=Pt(),lt=ct(O);uo(lt,()=>o(De),(Ct,Et)=>{Et(Ct,{})}),R(M,O)};kt(vn,M=>{A()&&M(ve)})}var ne=tt(vn,2);Wt(ne,t,"minimap",{},null);var se=tt(ne,2);Wt(se,t,"drawer",{},null);var Fe=tt(se,2);Wt(Fe,t,"controls",{},null);var te=tt(Fe,2);Wt(te,t,"toggle",{},null);var Ot=tt(te,2);Wt(Ot,t,"contrast",{},null);var ln=tt(Ot,2);{var Bn=M=>{Jl(M,{get creating(){return o(Xt)},get anchor(){return o(rt)},get graph(){return p()},get adding(){return o($t)},get color(){return nt()}})};kt(ln,M=>{o(St)&&!Z()&&M(Bn)})}to(N,M=>K(zt,M),()=>c()),Ht(()=>{W(N,"id",p().id),W(N,"title",At()),X(N,"width",D()?D()+"px":"100%"),X(N,"height",P()?P()+"px":"100%"),X(N,"cursor",z()?"move":"default")}),Nt("wheel",N,Ye(ze)),Nt("mousedown",N,mo(Ye(Rn))),Nt("touchend",N,Ye(Rt)),Nt("touchstart",N,mo(Ye(Tt))),Nt("keydown",N,de),Nt("keyup",N,_e),Nt("dragover",N,Ye(Le)),Nt("drop",N,Nn),R(e,N),re(),r()}function yc(e){e.parentNodes.forEach(s=>bc(s));const[t,n]=xc(e);wc(t,e),Sc(t);for(let s=0;s<10;s++){let l=!1;for(let c=0;c<=n;c++)if(t[c])for(let a=0;a<t[c].length;a++){const u=t[c][a],d=Ec(t,u,a);d&&(Fn(t[c],a,d),l=!0)}if(!l)break}const r=Nc(t);for(let s=0;s<10&&Ac(t,r);s++);for(let s=0;s<2;s++){let l=!1;for(let c=0;c<=n;c++)for(let a=0;a<t[c].length;a++){const u=t[c][a],d=Cc(t,u,a);d&&(Fn(t[c],a,d),l=!0)}if(!l)break}const i=[];for(let s=0;s<=n;s++)i.push(t[s]);return i}function bc(e,t=0,n=0){const r=[],i=(s,l=0,c=0)=>{s.depth=Math.max(s.depth,l),s.nesting=Math.max(s.nesting,c),r.push(s);for(const a of s.children){const{node:u,length:d}=a;i(u,d+l,c+1)}};i(e,t,n);for(const s of r)if(s.children.length){s.nesting=s.children[0].node.nesting-1,s.depth=s.children[0].node.depth-s.children[0].length;for(const l of s.children)s.nesting=Math.min(s.nesting,l.node.nesting-1),s.depth=Math.min(s.depth,l.node.depth-l.length)}}function xc(e){let t=0;const n={};for(const r in e.nodeList){const{depth:i,parents:s,children:l,type:c,data:a}=e.nodeList[r];t=Math.max(t,i),n[i]||(n[i]=[]);const u={id:r,label:a.content,children:[],parents:[],layer:i,type:c.trim()};a.props&&(u.propsId=a.props.trim());for(const d of s)u.parents.push(d.node.id);for(const d of l)u.children.push(d.node.id);n[i].push(u)}return[n,t]}function wc(e,t){for(const n in t.nodeList)for(const r of t.nodeList[n].children)if(r.node.depth-1>t.nodeList[n].depth){const i=t.nodeList[n].depth+1,s=r.node.depth-1,l=[];let c=0;for(let a=i;a<=s;a++){const u={id:`GHOST_${r.node.id}_${c}`,label:"",children:[],parents:[],layer:a,ignore:!0};l.push(u),c++}for(const a of r.node.parents)l[0].parents.push(a.node.id);l[l.length-1].children.push(r.node.id);for(let a=0;a<l.length-1;a++)l[a].children.push(`GHOST_${r.node.id}_${a+1}`);for(let a=s;a>=i;a--)l.length>0&&e[a].push(l[0]);for(const a of e[t.nodeList[n].depth])a.id===n&&(a.children.push(l[0].id),a.children=a.children.filter(u=>u!==r.node.id))}}function Sc(e){let t=0;for(const n in e)t=Math.max(e[n].length,t);for(const n in e)if(e[n].length<t){const r=Array.from({length:t-e[n].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(n),ignore:!0}));e[n]=e[n].concat(r)}}function yi(e,t,n){let r=0,i=0;for(const s of t.parents){for(let l=0;l<e[t.layer-1].length;l++)if(s===e[t.layer-1][l].id){r+=Math.abs(n-l);break}i++}for(const s of t.children){for(let l=0;l<e[t.layer+1].length;l++)if(s===e[t.layer+1][l].id){r+=Math.abs(n-l);break}i++}return isNaN(r/i)?0:r/i}function bi(e,t,n){let r=0,i=0;for(const s of t.parents){for(let l=0;l<e[t.layer-1].length;l++)if(s===e[t.layer-1][l].id){r+=Math.abs(n-l);break}i++}return isNaN(r/i)?0:r/i}function xi(e,t,n){let r=0,i=0;for(const s of t.children){for(let l=0;l<e[t.layer+1].length;l++)if(s===e[t.layer+1][l].id){r+=Math.abs(n-l);break}i++}return isNaN(r/i)?0:r/i}function Cc(e,t,n){const r=Nr(e,t.layer);let i=0;t.layer===0?i=xi(e,t,n):i=bi(e,t,n);let s=i,l=n;for(let c=0;c<e[t.layer].length;c++)if(e[t.layer][c].id==="NULL_NODE"){Fn(e[t.layer],n,c);const u=Nr(e,t.layer);let d=0;t.layer===0?d=xi(e,t,c):d=bi(e,t,c),u<=r&&d<s&&(s=d,l=c),Fn(e[t.layer],c,n)}return l===n?null:l}function Ec(e,t,n){const r={};let i=1/0,s=0;for(let l=0;l<e[t.layer].length;l++){const c=yi(e,t,l),a=yi(e,e[t.layer][l],n);r[l]=c+a}for(const l in r)r[l]<i&&(i=r[l],s=parseInt(l));return s===n?null:s}function Fn(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Nc(e){const t=[];for(const n in e)for(const r of e[n])t.push(r);return t.sort((n,r)=>r.parents.length+r.children.length-(n.parents.length+n.children.length))}function Nr(e,t){let n=0;for(let r=0;r<e[t].length;r++){const i=e[t][r],s=[],l=[];if(e[t-1])for(let c=r+1;c<e[t-1].length;c++)i.parents.includes(e[t-1][c].id)&&s.push(c);if(e[t+1])for(let c=r+1;c<e[t+1].length;c++)i.children.includes(e[t+1][c].id)&&l.push(c);for(let c=r+1;c<e[t].length;c++){const a=e[t][c];if(s.length)for(let u=0;u<e[t-1].length;u++)a.parents.includes(e[t-1][u].id)&&s.forEach(d=>{u<d&&n++});if(l.length)for(let u=0;u<e[t+1].length;u++)a.children.includes(e[t+1][u].id)&&l.forEach(d=>{u<d&&n++})}}return n}function Ac(e,t){let n=!1;for(const r of t){if(r.children.length+r.parents.length===0)return n;let i=0;for(let c=0;c<e[r.layer].length;c++)if(e[r.layer][c].id===r.id){i=c;break}let s=1/0,l=i;for(let c=0;c<e[r.layer].length;c++){Fn(e[r.layer],i,c);const a=Nr(e,r.layer);a<s&&(s=a,l=c),Fn(e[r.layer],c,i)}l!==i&&(Fn(e[r.layer],i,l),n=!0)}return n}function Mc(e,t){oe(t,!1);let n=g(t,"mermaid",8,""),r=g(t,"mermaidConfig",24,()=>({}));const i=ql(n());jt("flowchart",i);const s=yc(i),l=Lt("graph"),c=100,a=100;let u;nn(()=>{l.nodes.subscribe(m=>u=Object.fromEntries(m));let f=0;for(const m of s){let v=0,w=-1/0;for(const y of m)y.ignore||(u[`N-${y.id}`].position.update(()=>({x:v,y:f})),u[`N-${y.id}`].dimensions.width.subscribe(p=>v+=p),u[`N-${y.id}`].dimensions.height.subscribe(p=>w=Math.max(w,p))),v+=c;f+=w+a}}),pe();var d=Pt(),h=ct(d);cn(h,1,()=>s,Zn,(f,m)=>{var v=Pt(),w=ct(v);cn(w,1,()=>o(m),Zn,(y,p)=>{var D=Pt(),P=ct(D);{var E=L=>{const G=Te(()=>o(p).children.map(V=>[V,"1"]));qr(L,Xr({get label(){return o(p).label},get id(){return o(p).id},TD:!0},()=>r()[o(p).id],{get connections(){return o(G)}}))};kt(P,L=>{o(p).ignore||L(E)})}R(y,D)}),R(f,v)}),R(e,d),re()}function Pc(e){var r,i;const t=JSON.parse(e);return cs(t.id,{...t,editable:t.editable,direction:t.direction,locked:t.locked,zoom:((r=t.transforms)==null?void 0:r.scale)??1,translation:((i=t.transforms)==null?void 0:i.translation)??{x:0,y:0},edge:t.edge})}var Dc=Gt("<!> <!>",1),Ic=Gt('<div class="svelvet-temp svelte-lsy29y"></div>');function Lc(e,t){const n=Wr(t);oe(t,!1);const r=b(),i=b();let s=g(t,"mermaid",8,""),l=g(t,"theme",8,"light"),c=g(t,"id",8,0),a=g(t,"snapTo",8,0),u=g(t,"zoom",8,1),d=g(t,"TD",8,!1),h=g(t,"editable",8,!0),f=g(t,"locked",8,!1),m=g(t,"width",8,0),v=g(t,"height",8,0),w=g(t,"minimap",8,!1),y=g(t,"controls",8,!1),p=g(t,"toggle",8,!1),D=g(t,"drawer",8,!1),P=g(t,"contrast",8,!1),E=g(t,"fitView",8,!1),L=g(t,"selectionColor",8,"lightblue"),G=g(t,"edgeStyle",8,"bezier"),V=g(t,"endStyles",24,()=>[null,null]),z=g(t,"edge",8,null),Z=g(t,"disableSelection",8,!1),j=g(t,"mermaidConfig",24,()=>({})),mt=g(t,"translation",24,()=>({x:0,y:0})),gt=g(t,"trackpadPan",8,!1),et=g(t,"modifier",8,"meta"),q=g(t,"raiseEdgesOnSelect",8,!1),nt=g(t,"edgesAboveNode",8,!1),F=g(t,"title",8,""),T=g(t,"fixedZoom",8,!1),ot=g(t,"pannable",8,!0);const dt=eo();let I=b(null),At=d()?"TD":"LR";jt("snapTo",a()),jt("edgeStyle",G()),jt("endStyles",V()),jt("graphEdge",z()),jt("raiseEdgesOnSelect",q()),jt("edgesAboveNode",nt()),jt("graph",o(I)),nn(()=>{console.log("Graph component mounted with drawer:",D());const B=localStorage.getItem("state");if(console.log("stateObject during onMount:",B),B)_(I,Pc(B)),console.log("This is the graph set using reloadStore",o(I)),pr.add(o(I),o(I).id),console.log("graphStore updated",o(I));else{let H=`G-${c()||pr.count()+1}`;_(I,cs(H,{zoom:u(),direction:At,editable:h(),locked:f(),translation:mt()})),pr.add(o(I),H)}});function vt(B,H){if(!o(I))return;const zt=`N-${B[0]}`,ut=o(I).nodes.get(zt);if(!ut)return;const Y=ut.anchors.get(`A-${B[1]}/N-${B[0]}`);if(!Y)return;const bt=`N-${H[0]}`,xt=o(I).nodes.get(bt);if(!xt)return;const _t=xt.anchors.get(`A-${H[1]}/N-${H[0]}`);if(!_t)return;const pt=o(I).edges.match(Y,_t);pt&&o(I).edges.delete(pt[0])}x(()=>{},()=>{_(r,n.background)}),x(()=>o(I),()=>{_(i,o(I)&&o(I).edges)}),x(()=>(o(I),st(u())),()=>{o(I)&&o(I).transforms.scale.set(u())}),x(()=>o(i),()=>{o(i)&&o(i).onEdgeChange((B,H)=>{dt(H,{sourceAnchor:B.source,targetAnchor:B.target,sourceNode:B.source.node,targetNode:B.target.node})})}),Ae(),pe();var A=Pt(),It=ct(A);{var Yt=B=>{_c(B,{get width(){return m()},get height(){return v()},get toggle(){return p()},get backgroundExists(){return o(r)},get minimap(){return w()},get graph(){return o(I)},get fitView(){return E()},get fixedZoom(){return T()},get pannable(){return ot()},get theme(){return l()},get drawer(){return D()},get controls(){return y()},get selectionColor(){return L()},get disableSelection(){return Z()},get trackpadPan(){return gt()},get modifier(){return et()},get title(){return F()},get contrast(){return P()},$$events:{edgeDrop(H){ae.call(this,t,H)}},children:(H,zt)=>{var ut=Dc(),Y=ct(ut);{var bt=_t=>{Mc(_t,{get mermaid(){return s()},get mermaidConfig(){return j()}})};kt(Y,_t=>{s().length&&_t(bt)})}var xt=tt(Y,2);Wt(xt,t,"default",{},null),R(H,ut)},$$slots:{default:!0,minimap:(H,zt)=>{var ut=Pt(),Y=ct(ut);Wt(Y,t,"minimap",{},null),R(H,ut)},controls:(H,zt)=>{var ut=Pt(),Y=ct(ut);Wt(Y,t,"controls",{},null),R(H,ut)},background:(H,zt)=>{var ut=Pt(),Y=ct(ut);Wt(Y,t,"background",{},null),R(H,ut)},toggle:(H,zt)=>{var ut=Pt(),Y=ct(ut);Wt(Y,t,"toggle",{},null),R(H,ut)},drawer:(H,zt)=>{var ut=Pt(),Y=ct(ut);Wt(Y,t,"drawer",{},null),R(H,ut)},contrast:(H,zt)=>{var ut=Pt(),Y=ct(ut);Wt(Y,t,"contrast",{},null),R(H,ut)}}})},ht=B=>{var H=Ic();Ht(()=>{X(H,"width",m()?m()+"px":"100%"),X(H,"height",v()?v()+"px":"100%")}),R(B,H)};kt(It,B=>{o(I)?B(Yt):B(ht,!1)})}return R(e,A),Gr(t,"disconnect",vt),re({disconnect:vt})}var kc=Gt("<button></button>");function Tc(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(G,"$position",n),s=()=>C(j,"$rotation",n),l=()=>C(o(m),"$zIndex",n),c=()=>C(Z,"$borderRadius",n),a=()=>C(z,"$bgColor",n),u=()=>C(mt,"$width",n),d=()=>C(gt,"$height",n),h=b(),f=b(),m=b(),v=b();let w=g(t,"node",8),y=g(t,"hidden",8,!1),p=g(t,"toggleHidden",8),D=g(t,"top",8),P=g(t,"left",8),E=g(t,"nodeColor",8,null),L=g(t,"hideable",8);const{position:G,dimensions:V,bgColor:z,borderRadius:Z,rotation:j}=w(),{width:mt,height:gt}=V;let et=b(null);nn(()=>{var F;try{const T=(F=document.querySelector(`#${w().id}`))==null?void 0:F.firstChild;T&&_(et,window.getComputedStyle(T).backgroundColor)}catch(T){console.error(T)}}),x(()=>i(),()=>{_(h,i())}),x(()=>s(),()=>{_(f,s())}),x(()=>st(w()),()=>{yn(_(m,w().zIndex),"$zIndex",n)}),x(()=>o(et),()=>{_(v,o(et)==="rgba(0, 0, 0, 0)")}),Ae(),pe();var q=kc();let nt;Ht(()=>{nt=me(q,1,"minimap-node svelte-1hs9omb",null,nt,{hidden:y(),hideable:L()}),X(q,"z-index",l()),X(q,"border-radius",`${c()??""}px`),X(q,"--prop-background-color",E()||a()||!o(v)&&o(et)||null),X(q,"width",`${u()??""}px`),X(q,"height",`${d()??""}px`),X(q,"transform",`rotate(${o(f)??""}deg)`),X(q,"top",`${o(h).y-D()}px`),X(q,"left",`${o(h).x-P()}px`)}),Nt("click",q,()=>{L()&&p()(w())}),R(e,q),re(),r()}var Rc=Gt('<div class="mini-bounding-box svelte-aoq4g"></div>');function Oc(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(u(),"$position",n),s=()=>C(v,"$width",n),l=()=>C(w,"$height",n),c=()=>C(d(),"$color",n);let a=g(t,"dimensions",8),u=g(t,"position",8),d=g(t,"color",8),h=g(t,"groupName",8),f=g(t,"top",8),m=g(t,"left",8);const{width:v,height:w}=a();pe();var y=Rc();Ht(()=>{W(y,"id",`mini-${h()}-bounding-box`),W(y,"style",`border: solid 4px ${c()??""};`),X(y,"top",`${i().y-f()}px`),X(y,"left",`${i().x-m()}px`),X(y,"width",`${s()}px`),X(y,"height",`${l()}px`),X(y,"background-color",c())}),R(e,y),re(),r()}var zc=Gt('<div><div class="node-wrapper svelte-1qxvbux"><!> <!></div> <div class="overlay svelte-1qxvbux"></div></div>');function hs(e,t){oe(t,!1);const[n,r]=xe(),i=()=>C(ut,"$graphBounds",n),s=()=>C(bt,"$groups",n),l=()=>C(_t,"$dimensions",n),c=()=>C(yt,"$scale",n),a=()=>C(ft,"$translation",n),u=()=>C(pt,"$hidden",n),d=()=>C(Y,"$nodes",n),h=()=>C(Kt,"$groupBoxes",n),f=b(),m=b(),v=b(),w=b(),y=b(),p=b(),D=b(),P=b(),E=b(),L=b(),G=b(),V=b(),z=b(),Z=b(),j=b(),mt=b(),gt=b(),et=b(),q=b(),nt=b(),F=b(),T=b(),ot=b();let dt=Lt("graph"),I=g(t,"width",8,100),At=g(t,"height",24,I),vt=g(t,"mapColor",8,null),A=g(t,"nodeColor",8,null),It=g(t,"borderColor",8,null),Yt=g(t,"corner",8,"SE"),ht=g(t,"hideable",8,!1);const B=.9,H=I()*B,zt=At()*B,ut=dt.bounds.graphBounds,Y=dt.nodes,bt=dt.groups,xt=dt.transforms,_t=dt.dimensions,pt=s().hidden.nodes,yt=xt.scale,ft=xt.translation,Kt=dt.groupBoxes,ge={clientX:0,clientY:0};function ue(Ft){u().has(Ft)?u().delete(Ft):u().add(Ft),K(pt,u())}x(()=>i(),()=>{_(f,i())}),x(()=>o(f),()=>{_(m,o(f).top)}),x(()=>o(f),()=>{_(v,o(f).left)}),x(()=>o(f),()=>{_(w,o(f).right)}),x(()=>o(f),()=>{_(y,o(f).bottom)}),x(()=>l(),()=>{_(p,l().width)}),x(()=>l(),()=>{_(D,l().height)}),x(()=>(o(w),o(v)),()=>{_(P,o(w)-o(v))}),x(()=>(o(y),o(m)),()=>{_(E,o(y)-o(m))}),x(()=>(o(P),o(E)),()=>{_(L,o(P)/o(E))}),x(()=>(st(I()),st(At())),()=>{_(G,I()/At())}),x(()=>(o(p),o(D),c(),a()),()=>{_(V,Po(ge,0,0,o(p),o(D),c(),a()))}),x(()=>(o(p),o(P),c()),()=>{_(z,o(p)/o(P)/c())}),x(()=>(o(D),o(E),c()),()=>{_(Z,o(D)/o(E)/c())}),x(()=>(o(V),o(m),o(E)),()=>{_(j,(o(V).y-o(m))/o(E))}),x(()=>(o(V),o(v),o(P)),()=>{_(mt,(o(V).x-o(v))/o(P))}),x(()=>(o(L),o(G)),()=>{_(et,o(L)>=o(G))}),x(()=>(o(et),o(P),o(E)),()=>{_(q,o(et)?H/o(P):zt/o(E))}),x(()=>(o(E),o(q)),()=>{_(ot,o(E)*o(q))}),x(()=>(st(At()),o(ot)),()=>{_(F,(At()-o(ot))/2)}),x(()=>(o(P),o(q)),()=>{_(T,o(P)*o(q))}),x(()=>(st(I()),o(T)),()=>{_(nt,(I()-o(T))/2)}),x(()=>(o(F),o(j),o(ot),o(nt),o(mt),o(T),o(z),o(Z)),()=>{_(gt,`
		top: ${o(F)+o(j)*o(ot)}px;
		left: ${o(nt)+o(mt)*o(T)}px;
		width: ${o(z)*o(T)}px;
		height: ${o(Z)*o(ot)}px;`)}),Ae(),pe();var J=zc();let Q;var rt=Mt(J),St=Mt(rt);cn(St,1,()=>Array.from(d().entries()),([Ft,Jt])=>Ft,(Ft,Jt)=>{let Ce=()=>o(Jt)[1];var at=Pt(),Me=ct(at);{var Pe=ye=>{const Oe=Te(()=>u().has(Ce()));Tc(ye,{get node(){return Ce()},get top(){return o(m)},get left(){return o(v)},get nodeColor(){return A()},get hidden(){return o(Oe)},toggleHidden:ue,get hideable(){return ht()}})};kt(Me,ye=>{Ce().id!=="N-editor"&&ye(Pe)})}R(Ft,at)});var Xt=tt(St,2);cn(Xt,1,()=>Array.from(h().entries()),([Ft,Jt])=>Ft,(Ft,Jt)=>{let Ce=()=>o(Jt)[0];Oc(Ft,Xr(()=>o(Jt)[1],{get top(){return o(m)},get left(){return o(v)},get groupName(){return Ce()}}))});var $t=tt(rt,2);Ht(()=>{Q=me(J,1,"minimap-wrapper svelte-1qxvbux",null,Q,{SW:Yt()==="SW",NE:Yt()==="NE",SE:Yt()==="SE",NW:Yt()==="NW"}),X(J,"width",`${I()??""}px`),X(J,"height",`${(At()?At():I())??""}px`),X(J,"--prop-minimap-border-color",It()),X(J,"--prop-minimap-background-color",vt()),X(rt,"width",`${o(P)??""}px`),X(rt,"height",`${o(E)??""}px`),X(rt,"transform",`scale(${o(q)??""})`),W($t,"style",o(gt))}),R(e,J),re(),r()}const Bc=Object.freeze(Object.defineProperty({__proto__:null,default:hs},Symbol.toStringTag,{value:"Module"})),Wc={devices:{},connectors:[],subcircuits:{}};let Yn=null;function Gc(){let e=null;return{start:(t,n)=>{e!==null&&clearTimeout(e),e=setTimeout(()=>{e=null,t()},n)},cancel:()=>{e!==null&&(clearTimeout(e),e=null)}}}const wi=Gc();let lr=S(Wc);function gs(e,t,n=100){if(Yn===null)return Yn=e,wi.start(()=>{Yn=null,console.warn("Timeout waiting for the second connection")},n),!1;{wi.cancel(),"from"in e=="from"in Yn&&console.warn("both parts of connection are the same, ie: 2 inputs or 2 outputs");const r="from"in e?e:Yn,i="to"in e?e:Yn,s={...r,...i};t(s),Yn=null}}function Yc(e){gs(e,n=>{lr.update(r=>(r.connectors.push(n),r))})}function Xc(e){gs(e,n=>{lr.update(r=>{const i=r.connectors.findIndex(s=>JSON.stringify(s)===JSON.stringify(n));return i!==-1&&r.connectors.splice(i,1),r})})}var Fc=Gt("<div></div>");function qc(e,t){oe(t,!0);let n=t.portName.startsWith("input")?"input":"output";function r(l,c){const a={id:l,port:c};return c.startsWith("input")?{to:a}:{from:a}}Yo(()=>{if(t.linked&&(n==="input"||n==="output")){const l=r(t.nodeId,t.portName);return Yc(l)}else if(!t.linked){const l=r(t.nodeId,t.portName);return Xc(l)}});var i=Fc();let s;Ht(()=>s=me(i,1,`custom_anchor ${(n==="input"?"input":"output")??""}`,"svelte-a511es",s,{linked:t.linked,hovering:t.hovering,connecting:t.connecting})),R(e,i),re()}var jc=Gt("<div><!></div>");function yr(e,t){oe(t,!0);let n=g(t,"location",19,()=>["left","top"]),r="";n()[0]=="left"?n()[1]=="top"?r="input1":n()[1]=="bot"&&(r="input2"):n()[0]=="right"&&(r="output");const i=`${t.id}_${r}`;var s=jc(),l=Mt(s);const c=Qe(()=>n()[0]==="left"?"west":"east"),a=Qe(()=>t.io==="input"),u=Qe(()=>t.io==="output");vo(l,{id:i,get direction(){return o(c)},get input(){return o(a)},get output(){return o(u)},multiple:!1,children:Ti,$$slots:{default:(d,h)=>{const f=Qe(()=>h.linked),m=Qe(()=>h.hovering),v=Qe(()=>h.connecting);qc(d,{get connecting(){return o(v)},get linked(){return o(f)},portName:r,get nodeId(){return t.id},get hovering(){return o(m)}})}}}),Ht(()=>me(s,1,`${n()[0]??""} ${n()[1]??""}`,"svelte-12b90ve")),R(e,s),re()}const Hc="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%20512%20512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105zm-89%2046v18h71v-18H16zm368.8%2096c.2%206%20.2%2012%200%2018H496v-18H384.8zM16%20343v18h71v-18H16z'/%3e%3c/svg%3e";var Kc=Gt('<img alt="AND Gate"> <!> <!> <!>',1);function Si(e,t){oe(t,!0);let n=g(t,"width",3,80),r=g(t,"height",3,50);const i=localStorage.getItem("and_node_num");let s=0;i===null?localStorage.setItem("and_node_num","1"):(s=parseInt(i,10)+1,localStorage.setItem("and_node_num",s.toString()));const l=`And_${s}`;localStorage.setItem(`And_Gate_${s}`,s.toString());const c={type:"And",label:l};lr.update(a=>(a.devices[l]=c,a)),qr(e,{drop:"cursor",id:l,center:!0,children:(a,u)=>{var d=Kc(),h=ct(d);W(h,"src",Hc);var f=tt(h,2);yr(f,{location:["left","bot"],id:l,io:"input"});var m=tt(f,2);yr(m,{location:["left","top"],id:l,io:"input"});var v=tt(m,2);yr(v,{location:["right","mid"],id:l,io:"output"}),Ht(()=>{W(h,"width",n()),W(h,"height",r())}),R(a,d)},$$slots:{default:!0}}),re()}const Ro=""+new URL("line_9-CVANebye.svg",import.meta.url).href;var Uc=Gt('<nav class="side_menu svelte-nqr5it" aria-label="Side Menu"><ul class="svelte-nqr5it"><li class="svelte-nqr5it"><button class="svelte-nqr5it">Plexers</button> <img class="sketch_bar svelte-nqr5it" alt="sketched line bottom border for main app bar"></li> <li class="svelte-nqr5it"><button class="svelte-nqr5it">Logic Gates</button> <img class="sketch_bar svelte-nqr5it" alt="sketched line bottom border for main app bar"></li> <li class="svelte-nqr5it"><button class="svelte-nqr5it">Logic Gates</button> <img class="sketch_bar svelte-nqr5it" alt="sketched line bottom border for main app bar"></li> <li class="svelte-nqr5it"><button class="svelte-nqr5it">Logic Gates</button> <img class="sketch_bar svelte-nqr5it" alt="sketched line bottom border for main app bar"></li></ul></nav>');function Vc(e){function t(){console.log("menuActionHande")}var n=Uc(),r=Mt(n),i=Mt(r),s=Mt(i),l=tt(s,2);W(l,"src",Ro);var c=tt(i,2),a=Mt(c),u=tt(a,2);W(u,"src",Ro);var d=tt(c,2),h=Mt(d),f=tt(h,2);W(f,"src",Ro);var m=tt(d,2),v=Mt(m),w=tt(v,2);W(w,"src",Ro),Nt("click",s,t),Nt("click",a,t),Nt("click",h,t),Nt("click",v,t),R(e,n)}const $c=""+new URL("line_8-xEf4qFl9.svg",import.meta.url).href,Zc=""+new URL("LogiCapLogo-LbKfyh3n.png",import.meta.url).href;var Jc=Gt("<!> <!>",1),Qc=Gt('<div id="app_bar" class="svelte-gj1dfv"><div class="app_bar_items svelte-gj1dfv"><img alt="app logo" class="svelte-gj1dfv"></div> <img class="sketch_bar svelte-gj1dfv" alt="sketched line bottom border for main app bar"></div> <main class="svelte-gj1dfv"><!> <!></main>',1);function tu(e,t){oe(t,!1),lr.subscribe(d=>{console.log(d.connectors)}),pe();var n=Qc(),r=ct(n),i=Mt(r),s=Mt(i);W(s,"src",Zc);var l=tt(i,2);W(l,"src",$c);var c=tt(r,2),a=Mt(c);Vc(a);var u=tt(a,2);Lc(u,{theme:"LogiCap",TD:!0,controls:!0,edgeStyle:"step",editable:!1,children:(d,h)=>{var f=Jc(),m=ct(f);Si(m,{nodeStartPos:20,width:80,height:50});var v=tt(m,2);Si(v,{nodeStartPos:200,width:80,height:50}),R(d,f)},$$slots:{default:!0,minimap:(d,h)=>{hs(d,{width:100,corner:"NW",slot:"minimap"})}}}),R(e,n),re()}bl(tu,{target:document.getElementById("app")});export{vi as A,Ue as B,Aa as C,ml as D,qn as E,nu as F,ou as G,Pl as H,Ye as I,to as J,S as K,sr as L,ct as M,Hn as N,Bo as O,hn as P,uo as Q,W as R,cn as S,g as a,pr as b,o as c,tt as d,Mt as e,Ht as f,k as g,me as h,pe as i,X as j,ns as k,Nt as l,b as m,un as n,nn as o,oe as p,R as q,re as r,_ as s,Gt as t,Lt as u,C as v,Wt as w,kt as x,Te as y,xe as z};
